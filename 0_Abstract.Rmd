```{r, setup, include=F}
#rmarkdown::find_pandoc(version = "2.7.3")
source("global.R")
knitr::opts_chunk$set(cache = T, warning=F, message=F, comment="", fig.pos="H", out.extra="", size="fontsize{10}{11}\\selectfont")
global_buffer_force <- F

# library(knitr)
# hook_output = knit_hooks$get('source')  #this is the output for code
# 
# knit_hooks$set(source = function(x, options) {
#   if (!is.null(n <- options$linewidth) & knitr::is_latex_output()) {
#     x <- strwrap(x, width = n, exdent = 4)
#   }
#   hook_output(x, options)
# })
```


\listoffigures



# List of Abbreviations {-}

```{r, echo=F}
reactable(
  data.frame(
    Abbreviation = c(
      "xts", 
      "IDE",
      "MVP",
      "ITP", 
      "TEV",
      "MSTE",
      "QP",
      "SP500",
      "SP500TR"
      ),
    Definition = c(
      "R-object used to store time series data", 
      "Integrated development environment",
      "Mean variance portfolio",
      "Index tracking problem", 
      "Tracking error variance",
      "Mean square tracking error",
      "Quadratic programming",
      "Standard and Poor\'s 500 Index",
      "Standard and Poor\'s 500 Total Return Index"
      )
  ), 
  style = list(fontFamily="Computer Modern, sans-serif", fontSize=13)
) %>% 
  html_save()

```


# Abstract {-}
\pagenumbering{arabic}
Asset allocation aims at constructing applicable portfolios that follow a specific investment strategy, e.g. index tracking or optimal risk return. These investment strategies are formulated as equivalent constrained optimization problems whose solutions represent an optimal portfolio depending on the strategy. In practice, these problems are often too complicated to be solved directly by mathematical optimization methods, which usually leads to simplified models that may already contain faulty assumptions or inaccuracies. When this is ruled out and the problem is to be solved realistically, the need for metaheuristics such as particle swarm optimization (PSO) arises. PSO is able to find optimal solutions to complex problems by evaluating random positions in the search space to iteratively approach the optimum. In this thesis, common asset allocation problems are first explained and continuously solved using mathematical optimization methods to generate benchmark problems. After introducing the PSO, it is visualized using simple examples and the convergence behavior is analyzed until it is subsequently tested using the benchmark problems. Then, the PSO and its variants are used to solve optimization problems that cannot be solved by mathematical optimization methods. Finally, the most promising PSO variant is used to solve a discrete index tracking problem considering transaction costs and a rebalancing constraint. Backtests show that the PSO can provide time-stable results for such problems.



# Introduction
In the past, only active portfolio management existed, where the portfolio manager actively bought and sold assets in an attempt to create a portfolio with the client's objective in mind. This approach requires a high level of expertise of the portfolio manager, who must be informed about the financial world and each asset in his portfolio. The goal of this approach is to take advantage of assets that are traded on the market at the wrong price in order to make a profit. However, it is not trivial to spot these false prices, and it is becoming increasingly difficult as the market seems to become more efficient. An efficient market is defined by the fact that the quoted prices of assets reflect all the information about them and thus the exploitation of false prices is no longer possible. This theory has led to passive portfolio management, which is a quantitative approach that focuses more on the portfolio as a whole and less on each individual asset. This approach has proven successful, which is why there has been an increasing shift towards passive portfolio management in recent years. In 2014, 18% of all funds were passively managed, and this share has already risen to 25% in 2018 [@TaDe2019]. The reason is complex: In large part, passive management is characterized by the fact that many of the quantitative strategies are purely data-driven, which makes it easier to automate much of the work and therefore save costs because fewer portfolio managers can manage more portfolios. In addition, passively managed portfolios are often characterized by less rebalancing than actively managed portfolios, which keeps transaction costs lower. In addition to the lower cost of passive portfolios, they are also often less risky, which is of great interest to many investors.

A portfolio manager who pursues a quantitative strategy and wants to build his portfolio in a cost-efficient and fully automated way faces a major challenge, because the resulting optimization problems often cannot be solved with mathematical optimization methods, e.g. because they are discrete problems. To solve these kinds of problems nevertheless, metaheuristics such as PSO are used. A metaheuristic is a higher-order optimization method that considers the actual optimization problem as a black box and only needs to be able to evaluate the objective function. The disadvantages are that no quality statement can be made about the solution and that the runtime strongly depends on the time needed to evaluate the function. For this reason, it is important to test a methaheuristic intensively. A meta-study by [@BuAd2021] shows that PSO performs better than other metaheuristics in several application areas. These include multiple portfolio optimization problems that cannot be solved with mathematical optimization methods. For this reason, the application of PSO to financial mathematical problems is the focus of this thesis. In addition, the goal is to develop a deep understanding of the behavior of PSO so that readers can apply PSO themselves. This is supported by the fact that the code for this thesis is freely available and all data can be downloaded for free via yahoo-finance.

Another goal of this thesis is to introduce the readers to the programming language R, as it is perfect for such purposes. A great advantage of R is that it is user-friendly and that even complicated things can be formulated in a simple way. Moreover, R is one of the most commonly used programming languages in practical areas such as portfolio management, along with Python.

The next two chapters begin by describing basic information about the software used and then address the free availability of the data, which together should ensure reproducibility. After that the mathematical basics and conventions are explained in chapter\ \@ref(mathfundations). This is followed by an analysis of active and passive portfolio management in chapter chapter\ \@ref(activevspassive), which among other things describes the basic advantages of passive portfolio management. In the subsequent chapter, two common problems of passive portfolio management are described, the index tracking problem and the optimal return risk portfolio problem. These problems serve as test problems for the PSO, for which first the optimal solution must be obtained by means of mathematical optimization methods. This is done in chapter\ \@ref(analyticalsolver), additionally the limitations of such mathematical optimization methods are addressed. This is followed by the core topic of this thesis, which starts with the description of the standard PSO and analyzes its behavior. The test problems of the previous chapter are used to test the quality of the standard PSO. At the end of this chapter a discrete problem is explained and solved by the standard PSO, which would not be solvable with mathematical optimization methods. In the following chapter\ \@ref(psovariants), different variations of the PSO are tested by solving a discrete problem, as in the previous chapter. The standard PSO is used as a benchmark. The results indicate that the local PSO and the self-adjusting velocity PSO are most suitable for such problems. In the last chapter\ \@ref(reallife) the self-adjusting velocity PSO is used to solve a real life index tracking problem, which takes into account the transaction costs and the rebalancing constraint. The backtest is promising and suggests that the PSO can be used for such complicated problems.



