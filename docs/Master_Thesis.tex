% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
  oneside]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Master-Thesis},
  pdfauthor={Axel Roth},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{amsthm}
\usepackage{amsmath}
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 4pt
  \thm@postskip=\thm@preskip
}
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{Master-Thesis}
\author{Axel Roth}
\date{2022-08-21}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}
\addcontentsline{toc}{chapter}{Preface}

\renewcommand{\chaptermark}[1]{\markboth{\uppercase{#1}}{\uppercase{#1}}}
\markboth{\uppercase{Preface}}{\uppercase{Preface}}

Blah blah blah

\renewcommand{\chaptermark}[1]{\markboth{\uppercase{\thechapter. \ #1}}{}}

\hypertarget{abstract}{%
\chapter{Abstract}\label{abstract}}

Things about this thesis. why and what question should be answered. and what are the answers. (zusammenfassung)

\hypertarget{software-information-and-usage}{%
\chapter{Software information and usage}\label{software-information-and-usage}}

wie ich das buch schreibe, R markodwn bookdown und so und welche versionen ich nutze

\hypertarget{r-version-and-packages}{%
\section{R-Version and Packages}\label{r-version-and-packages}}

\hypertarget{reproducibility}{%
\section{reproducibility}\label{reproducibility}}

github und code im bookdown

\hypertarget{r-functions}{%
\section{R-functions}\label{r-functions}}

zb plotly\_save

\hypertarget{open-data-sources}{%
\chapter{Open Data Sources}\label{open-data-sources}}

To increase the reproducibility, all data is free and can be loaded with the function \texttt{getSymbols} from the quantmod R-Package. There can be chosen between different data-sources like yahoo-finance (default), alpha-vantage, google and more.

\hypertarget{r-functions-1}{%
\section{R-functions}\label{r-functions-1}}

The following functions are created to increase the simplicity of data-gathering with the quantmod R-package that can be found in the directory named \texttt{R/} in the attached \href{https://github.com/AxelCode-R/Master-Thesis}{github repository}.

\hypertarget{get_yf}{%
\subsection{\texorpdfstring{\texttt{get\_yf}}{get\_yf}}\label{get_yf}}

This function is the main wrapper for gathering data with \texttt{getSymbols} from yahoo-finance and transforms prices to returns with the \texttt{pri\_to\_ret} function explained in \ref{pri_to_ret}. The output is a list that contains prices and returns as a (xts)\{\url{https://cran.r-project.org/web/packages/xts/xts.pdf}\} object. The arguments that can be passed to \texttt{get\_yf} are:

\begin{itemize}
\tightlist
\item
  \texttt{tickers}: Vector of symbols like APPL, IBM, GOOG
\item
  \texttt{from\ ="2020-01-01"}: R-Date
\item
  \texttt{to\ =\ "2021-01-01"}: R-Date
\item
  \texttt{prices\_type\ =\ "close"}: Type of prices to gather (e.g ``open'', ``high'', ``low'', ``close'', ``adjusted'')
\item
  \texttt{return\_type\ =\ "adjusted"}: Type of returns to gather (e.g ``open'', ``high'', ``low'', ``close'', ``adjusted'')
\item
  \texttt{print\ =\ F}: Should the function print the return of \texttt{getSymbols}
\end{itemize}

\hypertarget{buffer}{%
\subsection{\texorpdfstring{\texttt{buffer}}{buffer}}\label{buffer}}

To make data reusable and decrease compiling time, this thesis saves all data gathered with \texttt{get\_yf}. It takes an R expression, evaluates it and saves it in the \texttt{buffer\_data/} directory with the given name. If this name already exists it will load the R-object from the RData-file without evaluating the expression. Forcing the evaluation and overwriting the existing RData-file can be done with \texttt{force=T}.

\hypertarget{mathematical-fundations}{%
\chapter{Mathematical Fundations}\label{mathematical-fundations}}

This chapter provides an overview of the mathematical calculations and conventions used in this Thesis. It's important to note that most of the time mathematical formulas are written in matrix notation. In the majority of cases, this will result in a direct translation into R-code. All necessary assumptions needed for the modeled return structure are provided in this chapter to enable each reader to make sense of the stated formulas. It is crucial to note that reality is too complicated and can only be partially modeled. Simplistic, basic models are employed that don't hold up in real-world situations, but these models or variations on them are frequently used in finance and have proven to be helpful. The complexity of solving advanced and basic models do not differ for the PSO, because the dimension of the objective function is based on the number of selectable elements, see chapter \ref{challenges}.

\hypertarget{basic-operators}{%
\section{Basic Operators}\label{basic-operators}}

A compendium that compares commonly used mathematical symbols to R-code and its meanings can be found in the table below:

\includegraphics{Master_Thesis_files/figure-latex/unnamed-chunk-4-1.png}

\hypertarget{return-calculation}{%
\section{Return calculation}\label{return-calculation}}

Any portfolio optimization strategy based on historical data must start with returns. These returns are calculated using \href{https://www.investopedia.com/terms/a/adjusted\%20closing\%20price.asp}{adjusted closing prices}, which show the percentage change over time. Adjusted closing prices are reflecting dividends and are cleaned of by stock splits and rights offerings. These Returns are essential for comparing assets and for analyzing dependencies.

\hypertarget{daily-returns}{%
\subsection{daily returns}\label{daily-returns}}

The default timeframe for all raw data in this thesis is one workday and only simple returns are used. The simple returns can be calculated as follows if we know the adjusted closing price \(P\) of one asset on workdays \(t_i\) and \(t_{i+1}\):
\[
  R_{i+1} = \frac{P_{t_{i+1}}}{P_{t_i}}-1
\]

\hypertarget{annualized-returns}{%
\subsection{annualized returns}\label{annualized-returns}}

\hypertarget{markowitz-modern-portfolio-theory-mpt}{%
\section{Markowitz Modern Portfolio Theory (MPT)}\label{markowitz-modern-portfolio-theory-mpt}}

In 1952, Harry Markowitz published his first ground-breaking work, which had a significant influence on modern finance, primarily by outlining the effects of diversification and efficient portfolio. The definition of an efficient portfolio is one that has either the maximum expected return for a given risk target or the minimum risk for the given expected return target. A simple quote to define diversification could be: ``A portfolio has the same return but less variance than the sum of its parts''. This is true if the assets are not perfectly correlated because bad and good movers can make up for each other, reducing the likelihood of extreme events. You can find more specific information at \citep{Mari2005}.

\hypertarget{assumptions-of-markowitz-portfolio-theory}{%
\subsection{Assumptions of Markowitz Portfolio Theory}\label{assumptions-of-markowitz-portfolio-theory}}

The following are the Markowitz assumptions that can be combined, according to \citep{Mari2005}:

\begin{itemize}
\tightlist
\item
  Perfect market without taxes or transaction costs.
\item
  Short sales are disallowed.
\item
  Assets are infinitely divisible.
\item
  Expected Returns, Variances and Covariances contain all information.
\item
  Investors are risk-adverse, they will only accept greater risk if they
  are compensated with a higher expected return.
\end{itemize}

The assumption that the returns are normally distributed is not required, but it will be assumed in this case to make the problem simpler. \citep{Mari2005} has further details regarding the requirements for utilizing other distributions. It is obvious that these assumptions are unrealistic in real-life.

\hypertarget{portfolio-math}{%
\section{Portfolio Math}\label{portfolio-math}}

Proofs for the fundamental calculations required for portfolio optimization as shown in \citep{Eric2021} will be provided in this section. The returns are presented differently than in most sources, because its the most common data-format used in practice. Suppose there are \(N\) assets that are described by a return vector \(R\) of random variables and a portfolio weight vector \(w\), respectively:
\[
  R = 
  \begin{bmatrix}
    R_{1} & R_{2} & \cdots & R_{N}  
 \end{bmatrix}
 , \ \ 
 w = 
  \begin{bmatrix}
    w_{1} \\ 
    w_{2} \\
    \cdots \\
    w_{N}  
 \end{bmatrix}
\]

Each return is additionally simplified in this thesis so that it is normally distributed with \(R_i = \mathcal{N}(\mu_i, \sigma_i^2)\). As a result, linear combinations of normally distributed random variables are jointly normal distributed and have a mean, variance, and covariance that can be used to fully describe them.

\hypertarget{expected-returns}{%
\subsection{expected returns}\label{expected-returns}}

The following formula can be used to get the expected returns of a vector with normally distributed random variables \(R \in \mathbb{R}^{N}\):
\begin{align*}
  E[R] &=
  \begin{bmatrix}
    E[R_{1}] & E[R_{2}] & \cdots & E[R_{N}]  
 \end{bmatrix}\\
 &=
 \begin{bmatrix}
    \mu_{1} & \mu_{2} & \cdots & \mu_{N} 
 \end{bmatrix}
 =
 \mu
\end{align*}
and \(\mu_i\) can be estimated in R with the base-function \texttt{mean()} and historical data.

\hypertarget{expected-portfolio-return}{%
\subsection{expected portfolio return}\label{expected-portfolio-return}}

The following equation can be used to get the linear combination of expected returns \(mu\) and a weighting vector \(w\) (for example, portfolio weights):
\begin{align*}
 \mu \times w &=
  \begin{bmatrix}
    E[\mu_{1}] & E[\mu_{2}] & \cdots & E[\mu_{N}]
 \end{bmatrix}
  \times 
  \begin{bmatrix}
    w_{1} \\ 
    w_{2} \\
    \cdots \\
    w_{N}  
 \end{bmatrix} \\
 &=
 E[\mu_{1}] \cdot w_1 + E[\mu_{2}] \cdot w_2 + \cdots + E[\mu_{N}] \cdot w_{N} 
 =
 \mu_P
\end{align*}

\hypertarget{portfolio-returns}{%
\subsection{portfolio returns}\label{portfolio-returns}}

Let \(R \in \mathbb{R}^{T \times N}\) denote a realized return Matrix of \(N\) assets and \(T\) days in the past. The portfolio return on each day can be calculated with the formula of the expected portfolio return. This is possible on all days \(T\) by:
\[
  R \times w = 
  \begin{bmatrix}
    R_{1, 1} & R_{1, 2} & \cdots & R_{1, N} \\
    R_{2, 1} & R_{2, 2} & \cdots & R_{2, N} \\
    \vdots  & \vdots & \ddots & \vdots \\
    R_{T, 1} & R_{T, 2} & \cdots & R_{T, N} \\
 \end{bmatrix}
  \times 
  \begin{bmatrix}
    w_{1} \\ 
    w_{2} \\
    \vdots \\
    w_{N}  
 \end{bmatrix}
 =
   \begin{bmatrix}
    R_{1}^P \\ 
    R_{2}^P \\
    \vdots \\
    R_{N}^P  
 \end{bmatrix}
 =
 R_P
\]

\hypertarget{covariance}{%
\subsection{Covariance}\label{covariance}}

The general formula of the covariance matrix \(\sum\) of a random vector \(R\) with \(N\) normally distributed elements and \(\sigma_{i,j}\) as correlation of two unique assets is described as:
\begin{align*}
  Cov(R) &= E[(R-\mu)^T \times (R-\mu)] \\
  &=   \begin{bmatrix}
    \sigma_1^2 & \sigma_{1,2} & \cdots & \sigma_{1,N} \\
    \sigma_{2, 1} & \sigma_2^2 & \cdots & \sigma_{2, N} \\
    \vdots  & \vdots & \ddots & \vdots \\
    \sigma_{N, 1} & \sigma_{N, 2} & \cdots & \sigma_N^2 \\
 \end{bmatrix}\\
  &=\sum
\end{align*}
and can be estimated in R with the base-function \texttt{cov()} and historical data.

\hypertarget{portfolio-variance}{%
\subsection{Portfolio Variance}\label{portfolio-variance}}

Let \(R\) be a random vector with \(N\) normally distributed elements and \(w\) a weighting vector. Suppose the covariance matrix \(\sum\) of \(R\) is known, then the variance of the linear combination of \(R\) can be calculated as:
\begin{align*}
  Var(R \times w) &= E[(R \times w - \mu \times w)^2] \\
  &= E[((R - \mu) \times w)^2]
\end{align*}

Since \((R - \mu) \times w\) is a scalar, it can be transformed from \(((R - \mu) \times w)^2\) to \(((R - \mu) \times w)^T \times ((R - \mu) \times w)\) and results in:
\begin{align*}
  Var(R \times w) &= E[((R - \mu) \times w)^T \times ((R - \mu) \times w)]\\ 
  &= E[(w^T \times (R - \mu)^T) \times ((R - \mu) \times w)]\\ 
  &= w^T \times E[(R - \mu)^T \times (R - \mu)] \times w \\
  &= w^T \times \sum \times w
\end{align*}

The same hold for a estimation of \(\sum\).

\hypertarget{created-r-functions}{%
\section{Created R-Functions}\label{created-r-functions}}

\hypertarget{pri_to_ret}{%
\subsection{pri\_to\_ret}\label{pri_to_ret}}

\hypertarget{activ-vs-passiv-investing}{%
\chapter{Activ vs Passiv Investing}\label{activ-vs-passiv-investing}}

The fundation of Asset Management

passiv vs activ studie
\texttt{https://www.scirp.org/journal/paperinformation.aspx?paperid=92983}

gut gut
\url{file:///C:/Users/Axel/Desktop/Master-Thesis-All/Ziel\%20was\%20beantwortet\%20werden\%20soll/Quellen\%20nur\%20wichtige/Rasmussen2003_Book_QuantitativePortfolioOptimisat.pdf}

\hypertarget{challenges}{%
\chapter{Challenges of Passiv Investing}\label{challenges}}

This Chapter will analyse two common challenges of Passiv-Investing and create simple examples to test the PSO. The first one is the mean-variance portfolio (MVP) from the modern portfolio theory of Markowitz which is simply said an optimal allocation of assets regarding risk and return. The second challenge is the index-tracking-problem which tries to construct a portfolio which has a minimal tracking error to a given benchmark.

\hypertarget{mean-variance-portfolio-mvp}{%
\section{Mean-variance portfolio (MVP)}\label{mean-variance-portfolio-mvp}}

Markowitz has shown that diversifying the risk on multiple assets will reduce the overall risk of the portfolio. This result was the beginning of the widely used modern portfolio theorie which uses mathematical models to archive portfolios with minimal variance for a given return target. All these optimal portfolios for a given return target are called efficient and create the efficient frontier.

\hypertarget{mvp}{%
\subsection{MVP}\label{mvp}}

Let there be \(N\) assets and its returns on \(T\) different days which creates a return matrix \(R \in \mathbb{R}^{T \times N}\). Each element \(R_{t,i}\) contains the return of the \(i\)-th asset on day \(t\). The covariance matrix of the returns is \(\textstyle\sum \in \mathbb{R}^{N \times N}\) and the expected returns are \(\mu \in \mathbb{R}^{N}\). The MVP with risk aversion parameter \(\lambda \in [0,1]\) like shown in \citep{Mari2005} can be formalized as follows:
\begin{equation} 
\underset{w}{minimize} \ \ \ \lambda \ w^T \textstyle\sum w - (1-\lambda) \ \mu^T w
\label{eq:MVP}
\end{equation}

The risk aversion parameter \(\lambda\) defines the trade-off between risk and return. With \(\lambda = 1\), the minimization problem only contains the the variance term and so on results in a minimum variance portfolio and \(\lambda = 0\) transforms the problem to a minimization of the negative expected returns so on results in a maximum return portfolio. All possible \(\lambda \in [0, 1]\) represent the efficient frontier.

\hypertarget{mvp-example}{%
\subsection{MVP example}\label{mvp-example}}

All possible MVPs combined create the efficient frontier, that is analyzed in this section without going into the details of its calculation. This example uses three assets (equitys: IBM, Google, Apple) and calculates the solution of \ref{eq:MVP} for each \(\lambda\). First of all are the daily returns of these three assets are loaded from the year 2020.

The cumulated daily returns are:

\includegraphics{Master_Thesis_files/figure-latex/unnamed-chunk-6-1.png}

The expected daily returns and the covariance matrix for the 3 assets can be calculated with:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{p0}\NormalTok{(}\StringTok{"estimation of expected daily returns"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "estimation of expected daily returns"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mu }\OtherTok{\textless{}{-}} \FunctionTok{sapply}\NormalTok{((}\DecValTok{1}\SpecialCharTok{+}\NormalTok{returns), prod)}\SpecialCharTok{\^{}}\NormalTok{(}\DecValTok{1}\SpecialCharTok{/}\FunctionTok{nrow}\NormalTok{(returns))}\SpecialCharTok{{-}}\DecValTok{1}
\NormalTok{mu}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##           AAPL            IBM           GOOG 
##  0.00237641721 -0.00004622149  0.00106873786
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{p0}\NormalTok{(}\StringTok{"estimation of positiv definite covariance matrix"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "estimation of positiv definite covariance matrix"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cov }\OtherTok{\textless{}{-}} \FunctionTok{as.matrix}\NormalTok{(}\FunctionTok{nearPD}\NormalTok{(}\FunctionTok{cov}\NormalTok{(returns))}\SpecialCharTok{$}\NormalTok{mat)}
\NormalTok{cov}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##              AAPL          IBM         GOOG
## AAPL 0.0008635696 0.0004356282 0.0005337719
## IBM  0.0004356282 0.0006626219 0.0004086728
## GOOG 0.0005337719 0.0004086728 0.0005827306
\end{verbatim}

These are all the necessary data to solve the MVP \eqref{eq:MVP} with \(\lambda \in \{0.01, 0.02, ..., 0.99, 1\}\). All 100 portfolios are calculated by solving a quadratic minimization problem with long only constraint.

The resulting daily returns and standard deviation are transformed to annual returns and standard deviation and are plotted to create the efficient frontier:

\includegraphics{Master_Thesis_files/figure-latex/unnamed-chunk-9-1.png}

The portfolio compositions for each \(\lambda\) are:

\includegraphics{Master_Thesis_files/figure-latex/unnamed-chunk-10-1.png}

\hypertarget{index-tracking-portfolio-itp}{%
\section{Index-tracking portfolio (ITP)}\label{index-tracking-portfolio-itp}}

Indices are asset baskets that are used to track the performance of a specific asset group. The well-known Standard and Poor's 500 index (short: S\&P 500), for example, tracks the top 500 stocks in the United States. All indices are not investible and only serve to visualize the performance of these asset groups without incurring transaction costs. Asset managers use such indices as benchmarks to compare the performance of their funds. Each fund has its own benchmark, which contains roughly the same assets that the manager could purchase. If the fund underperforms its benchmark, it may be an indication that the fund manager made a poor decision. That is why all fund managers strive to outperform their benchmarks through carefully chosen investments. The past has proven that this is rearly achived with activ managemnt after costs \citep{Desm2016}. This is the reason why passiv managed funds with the goal to track there benchmarks are becoming more frequent. This is why passively managed funds with the purpose of tracking their benchmarks are becoming more common. This can be accomplished through either full or sparse replication. In most circumstances, using a full replication that achieves the exact performance is not achievable, because not all assets in an index are investable. And, if so, it would be unwise because benchmarks with numerous indexes can contain over ten thousand separate assets, resulting in a massive amount of transaction costs. A sparse replication of the performance is the most prevalent approach. To do so, the portfolio manager must define his benchmark, which should overlap with his fund's investing universe. Following that, he will reduce this universe using investor principles such as liquidity and availability. Now he can begin to optimize a portfolio, taking into account the investor constraints, in order to match the benchmark performance. Typically, this is accomplished by lowering the variance between the ITP's daily returns and the benchmark:

\[
 minimize \ \ Var(r_{p}-r_{bm})
\]

To obtain the portfolio weights \(w\), its necessary to substitute \(r_{p}\) as shown below:

\[
  r_{p} = R * w
\]

The Variance is then solved up until a quadratic problem dependent on the portfolio weights \(w\) is represented:

\[
 Var(r_{p}-r_{bm}) = Var(R * w - r_{bm}) = Var(R * w) + Var(r_{bm}) - 2 \cdot Cov(R*w,r_{bm}) 
\]
Now the three terms can be solved, beginning with the easiest.

\[
Var(r_{bm}) = \sigma_{bm}^2 = constant
\]

The variance of the portfolio can be solved by looking at the Portfolio math Using Matrix Algebra section in \citep{Eric2021}:

\[
Var(R * w) = w^T * Cov(R) * w
\]

And the last term can be solved in general as (\url{https://bookdown.org/compfinezbook/introcompfinr/Multivariate-Probability-Distributions-Using-Matrix-Algebra.html} 3.6.5):

\[
  Cov(A*a, b) = Cov(b, A*a) = E[(b-\mu_{b})(A*a-\mu_{A}*a)] = E[(b-\mu_{b})(A-\mu_{A})*a] = E[(b-\mu_{b})(A-\mu_{A})]*a = Cov(A,b) * a
\]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{A }\OtherTok{=} \FunctionTok{matrix}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{6}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{10}\NormalTok{), }\AttributeTok{ncol=}\DecValTok{2}\NormalTok{)}
\NormalTok{a }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\FloatTok{0.2}\NormalTok{, }\FloatTok{0.8}\NormalTok{)}
\NormalTok{b }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{7}\NormalTok{)}

\FunctionTok{cov}\NormalTok{(A }\SpecialCharTok{\%*\%}\NormalTok{ a, b)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1]
## [1,] 2.15
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{t}\NormalTok{(a) }\SpecialCharTok{\%*\%} \FunctionTok{cov}\NormalTok{(A, b)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1]
## [1,] 2.15
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{t}\NormalTok{(}\FunctionTok{cov}\NormalTok{(A, b)) }\SpecialCharTok{\%*\%}\NormalTok{ a }\CommentTok{\# das hier wird gebraucht}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1]
## [1,] 2.15
\end{verbatim}

This results in the final formula of the ITP:

\begin{equation}
  \begin{split}
   Var(r_{p}-r_{bm}) & = Var(R \times w - r_{bm}) \\
   & = Var(R \times w) - 2 \cdot Cov(R \times w,r_{bm}) + Var(r_{bm})  \\
   & = w^T \times Cov(R) \times w - 2 \cdot Cov(r_{bm}, R)^T \times w + \sigma_{bm}^2
   \end{split}
   \label{eq:ITP}
\end{equation}

The minimization problem of the ITP in the general stricture which all optimizers need is:

\[
  min(\frac{1}{2} \cdot b^T \times D \times b -d^T \times b)
\]

Minimization problems can ignore constant terms and global stretching coefficients and still find the same minimum. This results in the general substitution of the ITP as follows:

\[
  D = Cov(R)
\]

and

\[
d = Cov(r_{bm}, R)
\]

Its possible to add some basic constraints like in the MVP, to sum up the weights to 1 and being long only.

\hypertarget{example-itp}{%
\subsection{Example ITP}\label{example-itp}}

This section will show the results of tracking the S\&P 500 with a tracking portfolio that can only invest in IBM, Apple and Google without going into details:

\begin{verbatim}
##      AAPL       IBM      GOOG 
## 0.2677928 0.4041880 0.3280192
\end{verbatim}

\includegraphics{Master_Thesis_files/figure-latex/unnamed-chunk-12-1.png}

\hypertarget{analytic-solver-for-quadratic-programming-problems}{%
\chapter{Analytic Solver for Quadratic Programming Problems}\label{analytic-solver-for-quadratic-programming-problems}}

The benefits and drawbacks of analytic solvers for quadratic programming problems will be discussed in this chapter after chapter \ref{challenges} \href{challenges}{6}'s discussion of some common problems and their solutions. It would go beyond the scope of this thesis to explain the mathematical underlying principles of how a solver addresses quadratic problems, only the applications and analysis are discussed here. The foremost reason of addressing quadratic programming solvers is to use it as a benchmark for the PSO.

\hypertarget{quadratic-programming-qp}{%
\section{Quadratic Programming (QP)}\label{quadratic-programming-qp}}

A quadratic program is a minimization problem of some function that returns a scalar and consists of an quadratic term and an linear term dependent on the variable of interest. Additionally can the problem be simply constrained by several linear inequalities that restrict the solution. The general formulation used, is to find \(x\) that minimizes the following problem:
\[
  min \ \frac{1}{2} \cdot x^T \times D \times x - d^T \times x 
\]
and holds under the linear constraints:
\[
  A^T \times x >= b_0
\]

Some other sources notate the problems with different signs or coefficients that are all exchangeable with the above stated problem. Additionally has the problem above the same notation that is used in the R-Package \texttt{quadprog} which will reduce substitution efforts. All modern programming languages do have many solvers for quadratic problem. They differ mostly in computational time on specific problems and the requirements. Some commercial QP-solvers do additionally accept more complex constraints, like absolute (e.g.~\(|A^T \times x| >= a_0\)) or mixed-integer (e.g.~\(x \in \mathbb{N}\)). Specially the mixed-integer constraint problems will result in a enormously increase of memory.

\hypertarget{qp-solver-from-quadprog}{%
\section{QP Solver from quadprog}\label{qp-solver-from-quadprog}}

The most common free QP-solver used in R is \href{https://cran.r-project.org/web/packages/quadprog/quadprog.pdf}{quadprog} which consists of a single function named \texttt{solve.QP}. Its implementation routine is the dual method of Goldfarb and Idnani that was published in \citep{GoId1982} and \citep{GoId1983}. It uses the above stated QP with the requirement that \(D\) needs to be a symmetric positive definite matrix. It means that \(x^T D x > 0 \forall x \in R^N and D\in R^{N \times N}\) which is equivalent to, all eigenvalues are bigger than null. In most cases this is not achieved by using the estimation of the covariance matrix \(\sum\), but its possible to find the nearest positive definite matrix of \(\sum\) with the function \texttt{nearPD} from the \href{https://cran.r-project.org/web/packages/Matrix/Matrix.pdf}{Matrix} R-Package. The error that occurs is printed and often do not exceed a percentage change of elements above \(10^{-15} \ \%\), which is negligible for the context of this thesis. The \texttt{solve.QP} functions for a \(N\) dimensional vector of interest, has the following arguments that can be found in the above stated formulation of a QP:
+ Dmat: Symmetric positive definite matrix \(D \in R^{N \times N}\) of the quadratic term.
+ dvec: Vector \(d \in R^{N}\) of the linear term
+ Amat: Constraint matrix \(A\)
+ bvec: Constraint vector \(b_0\)
+ meq = 1: means that the first row of \(A\) is treated as equality constraint (used to achieve fully invested portfolios)

The return of \texttt{solve.QP} is a list and contains among other things the following attributes of interest:
+ solution: Vector containing the solution \(x\) of the quadratic programming problem. (e.g.~portfolio weights)
+ value: Scalar, the value of the quadratic function at the solution

\hypertarget{example-solving-mvp-with-solve.qp}{%
\section{\texorpdfstring{Example: Solving MVP with \texttt{solve.QP}}{Example: Solving MVP with solve.QP}}\label{example-solving-mvp-with-solve.qp}}

This section provides insights into the effect of diversification and the use of \texttt{solve.QP}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{returns\_raw }\OtherTok{\textless{}{-}} \FunctionTok{buffer}\NormalTok{(}
  \FunctionTok{get\_yf}\NormalTok{(}
    \AttributeTok{tickers =} \FunctionTok{c}\NormalTok{(}\StringTok{"IBM"}\NormalTok{, }\StringTok{"GOOG"}\NormalTok{, }\StringTok{"AAPL"}\NormalTok{, }\StringTok{"MSFT"}\NormalTok{, }\StringTok{"AMZN"}\NormalTok{, }\StringTok{"NVDA"}\NormalTok{, }\StringTok{"JPM"}\NormalTok{, }\StringTok{"META"}\NormalTok{, }\StringTok{"V"}\NormalTok{, }\StringTok{"WMT"}\NormalTok{), }
    \AttributeTok{from =} \StringTok{"2016{-}01{-}01"}\NormalTok{, }
    \AttributeTok{to =} \StringTok{"2021{-}12{-}31"}\NormalTok{,}
    \AttributeTok{print=}\NormalTok{T}
\NormalTok{  )}\SpecialCharTok{$}\NormalTok{returns, }
  \StringTok{"10\_assets"}\NormalTok{,}
  \AttributeTok{force=}\NormalTok{T}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "IBM"  "GOOG" "AAPL" "MSFT" "AMZN" "NVDA" "JPM"  "META" "V"    "WMT"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{vars }\OtherTok{\textless{}{-}} \FunctionTok{sapply}\NormalTok{(returns\_raw, var)}

\NormalTok{returns\_raw }\OtherTok{\textless{}{-}}\NormalTok{ returns\_raw[, }\FunctionTok{order}\NormalTok{(vars, }\AttributeTok{decreasing =}\NormalTok{ F)]}
\NormalTok{vars }\OtherTok{\textless{}{-}}\NormalTok{ vars[}\FunctionTok{order}\NormalTok{(vars, }\AttributeTok{decreasing =}\NormalTok{ F)]}


\CommentTok{\# mvp \textless{}{-} function(returns, lambda)\{}
\CommentTok{\#   tc \textless{}{-} tryCatch(\{}
\CommentTok{\#     mu \textless{}{-} sapply((1+returns), prod)\^{}(1/nrow(returns)){-}1}
\CommentTok{\# }
\CommentTok{\#     cov \textless{}{-} as.matrix(nearPD(cov(returns))$mat)}
\CommentTok{\# }
\CommentTok{\#     mat \textless{}{-} list(}
\CommentTok{\#       Dmat = lambda * cov,}
\CommentTok{\#       dvec = (1{-}lambda) * mu,}
\CommentTok{\#       Amat = t(rbind(}
\CommentTok{\#         rep(1, ncol(returns))\#, \# sum up to 1}
\CommentTok{\#         \#diag(1, nrow=ncol(returns), ncol=ncol(returns)) \# long only}
\CommentTok{\#       )),}
\CommentTok{\#       bvec = c(}
\CommentTok{\#         1\#, \# sum up to 1}
\CommentTok{\#         \#rep(0, ncol(returns)) \# long only}
\CommentTok{\#       ),}
\CommentTok{\#       meq = 1}
\CommentTok{\#     )}
\CommentTok{\#   }
\CommentTok{\#     qp \textless{}{-} solve.QP(Dmat = mat$Dmat, dvec = mat$dvec, Amat = mat$Amat, bvec = mat$bvec, meq = mat$meq)}
\CommentTok{\#     }
\CommentTok{\#     res \textless{}{-} list(}
\CommentTok{\#       "mu" = mu \%*\% qp$solution,}
\CommentTok{\#       "var" = t(qp$solution) \%*\% cov \%*\% qp$solution,}
\CommentTok{\#       "composition" = setNames(qp$solution, colnames(returns))}
\CommentTok{\#     )}
\CommentTok{\#     TRUE}
\CommentTok{\#   \}, error = function(e)\{FALSE\})}
\CommentTok{\#   }
\CommentTok{\# }
\CommentTok{\#   if(tc)\{}
\CommentTok{\#     return(res)}
\CommentTok{\#   \}else\{}
\CommentTok{\#     return(list(}
\CommentTok{\#       "mu" = NA,}
\CommentTok{\#       "var" = NA,}
\CommentTok{\#       "composition" = NA}
\CommentTok{\#     ))}
\CommentTok{\#   \}}
\CommentTok{\# \}}

\CommentTok{\# df \textless{}{-} NULL}
\CommentTok{\# for(i in 2:ncol(returns\_raw))\{}
\CommentTok{\#   returns \textless{}{-} returns\_raw[, 1:10]}
\CommentTok{\#   temp \textless{}{-} NULL}
\CommentTok{\#   for(lambda in seq(0.01, 1, 0.01))\{}
\CommentTok{\#     res \textless{}{-} mvp(returns, lambda)}
\CommentTok{\#     }
\CommentTok{\#     temp \textless{}{-} cbind(temp, res$var)}
\CommentTok{\#   \}}
\CommentTok{\#   df \textless{}{-} rbind(df, temp)}
\CommentTok{\# \}}
\CommentTok{\# colnames(df) \textless{}{-} paste0("l\_", seq(0.01, 1, 0.01))}
\CommentTok{\# rownames(df) \textless{}{-} paste0("n\_", 2:ncol(returns\_raw))}



\NormalTok{mvp }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(returns, return\_target)\{}
\NormalTok{  tc }\OtherTok{\textless{}{-}} \FunctionTok{tryCatch}\NormalTok{(\{}
\NormalTok{    mu }\OtherTok{\textless{}{-}} \FunctionTok{sapply}\NormalTok{((}\DecValTok{1}\SpecialCharTok{+}\NormalTok{returns), prod)}\SpecialCharTok{\^{}}\NormalTok{(}\DecValTok{1}\SpecialCharTok{/}\FunctionTok{nrow}\NormalTok{(returns))}\SpecialCharTok{{-}}\DecValTok{1}

\NormalTok{    cov }\OtherTok{\textless{}{-}} \FunctionTok{as.matrix}\NormalTok{(}\FunctionTok{nearPD}\NormalTok{(}\FunctionTok{cov}\NormalTok{(returns))}\SpecialCharTok{$}\NormalTok{mat)}

\NormalTok{    mat }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}
      \AttributeTok{Dmat =} \DecValTok{1} \SpecialCharTok{*}\NormalTok{ cov,}
      \AttributeTok{dvec =} \DecValTok{0} \SpecialCharTok{*}\NormalTok{ mu,}
      \AttributeTok{Amat =} \FunctionTok{t}\NormalTok{(}\FunctionTok{rbind}\NormalTok{(}
        \FunctionTok{rep}\NormalTok{(}\DecValTok{1}\NormalTok{, }\FunctionTok{ncol}\NormalTok{(returns)), }\CommentTok{\# sum up to 1}
        \FunctionTok{diag}\NormalTok{(}\DecValTok{1}\NormalTok{, }\AttributeTok{nrow=}\FunctionTok{ncol}\NormalTok{(returns), }\AttributeTok{ncol=}\FunctionTok{ncol}\NormalTok{(returns)), }\CommentTok{\# long only}
\NormalTok{        mu,}
        \SpecialCharTok{{-}}\NormalTok{mu}
\NormalTok{      )),}
      \AttributeTok{bvec =} \FunctionTok{c}\NormalTok{(}
        \DecValTok{1}\NormalTok{, }\CommentTok{\# sum up to 1}
        \FunctionTok{rep}\NormalTok{(}\DecValTok{0}\NormalTok{, }\FunctionTok{ncol}\NormalTok{(returns)), }\CommentTok{\# long only}
\NormalTok{        return\_target }\SpecialCharTok{*} \FloatTok{0.95}\NormalTok{,}
        \SpecialCharTok{{-}}\NormalTok{return\_target }\SpecialCharTok{*} \FloatTok{1.05}
\NormalTok{      ),}
      \AttributeTok{meq =} \DecValTok{1}
\NormalTok{    )}
  
\NormalTok{    qp }\OtherTok{\textless{}{-}} \FunctionTok{solve.QP}\NormalTok{(}\AttributeTok{Dmat =}\NormalTok{ mat}\SpecialCharTok{$}\NormalTok{Dmat, }\AttributeTok{dvec =}\NormalTok{ mat}\SpecialCharTok{$}\NormalTok{dvec, }\AttributeTok{Amat =}\NormalTok{ mat}\SpecialCharTok{$}\NormalTok{Amat, }\AttributeTok{bvec =}\NormalTok{ mat}\SpecialCharTok{$}\NormalTok{bvec, }\AttributeTok{meq =}\NormalTok{ mat}\SpecialCharTok{$}\NormalTok{meq)}
    
\NormalTok{    res }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}
      \StringTok{"mu"} \OtherTok{=}\NormalTok{ mu }\SpecialCharTok{\%*\%}\NormalTok{ qp}\SpecialCharTok{$}\NormalTok{solution,}
      \StringTok{"var"} \OtherTok{=} \FunctionTok{t}\NormalTok{(qp}\SpecialCharTok{$}\NormalTok{solution) }\SpecialCharTok{\%*\%}\NormalTok{ cov }\SpecialCharTok{\%*\%}\NormalTok{ qp}\SpecialCharTok{$}\NormalTok{solution,}
      \StringTok{"composition"} \OtherTok{=} \FunctionTok{setNames}\NormalTok{(qp}\SpecialCharTok{$}\NormalTok{solution, }\FunctionTok{colnames}\NormalTok{(returns))}
\NormalTok{    )}
    \ConstantTok{TRUE}
\NormalTok{  \}, }\AttributeTok{error =} \ControlFlowTok{function}\NormalTok{(e)\{}\ConstantTok{FALSE}\NormalTok{\})}
  

  \ControlFlowTok{if}\NormalTok{(tc)\{}
    \FunctionTok{return}\NormalTok{(res)}
\NormalTok{  \}}\ControlFlowTok{else}\NormalTok{\{}
    \FunctionTok{return}\NormalTok{(}\FunctionTok{list}\NormalTok{(}
      \StringTok{"mu"} \OtherTok{=} \ConstantTok{NA}\NormalTok{,}
      \StringTok{"var"} \OtherTok{=} \ConstantTok{NA}\NormalTok{,}
      \StringTok{"composition"} \OtherTok{=} \ConstantTok{NA}
\NormalTok{    ))}
\NormalTok{  \}}
\NormalTok{\}}

\NormalTok{df }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{2}\SpecialCharTok{:}\FunctionTok{ncol}\NormalTok{(returns\_raw))\{}
\NormalTok{  returns }\OtherTok{\textless{}{-}}\NormalTok{ returns\_raw[, }\DecValTok{1}\SpecialCharTok{:}\NormalTok{i]}
  \ControlFlowTok{for}\NormalTok{(return\_target }\ControlFlowTok{in} \FunctionTok{seq}\NormalTok{(}\FloatTok{0.0004}\NormalTok{,}\FloatTok{0.0012}\NormalTok{, }\FloatTok{0.00001}\NormalTok{))\{}
\NormalTok{    res }\OtherTok{\textless{}{-}} \FunctionTok{mvp}\NormalTok{(returns, return\_target)}
    
\NormalTok{    df }\OtherTok{\textless{}{-}} \FunctionTok{rbind}\NormalTok{(df, }\FunctionTok{data.frame}\NormalTok{(}\StringTok{"index"}\OtherTok{=}\NormalTok{i, }\StringTok{"return\_target"}\OtherTok{=}\NormalTok{return\_target, }\StringTok{"var"}\OtherTok{=}\NormalTok{res}\SpecialCharTok{$}\NormalTok{var, }\StringTok{"return"} \OtherTok{=}\NormalTok{ res}\SpecialCharTok{$}\NormalTok{mu))}
\NormalTok{  \}}
\NormalTok{  df }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(return))}
\NormalTok{  min\_return }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(index}\SpecialCharTok{==}\NormalTok{i) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(var }\SpecialCharTok{==} \FunctionTok{min}\NormalTok{(var)) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{pull}\NormalTok{(return) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{min}\NormalTok{()}
\NormalTok{  df }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(index }\SpecialCharTok{!=}\NormalTok{ i }\SpecialCharTok{|}\NormalTok{ (index }\SpecialCharTok{==}\NormalTok{ i }\SpecialCharTok{\&}\NormalTok{ return }\SpecialCharTok{\textgreater{}=}\NormalTok{ min\_return))}
\NormalTok{\}}


\CommentTok{\#library(RColorBrewer)}
\CommentTok{\# palette \textless{}{-} colorRampPalette(c("black","grey","darkblue", "blue", "lightblue1",}
\CommentTok{\#                               "green","yellow", "red", "darkred","brown","black"))}

\CommentTok{\# df\_ \textless{}{-} df[8:9,]}
\CommentTok{\# plot\_ly(x=colnames(df\_), y=rownames(df\_), z=sqrt(df\_), colors = palette(50), type = "heatmap", zauto=F, zmin=0, zmax=0.08)}

\CommentTok{\# df\_ \textless{}{-} df\#[8:9,]}
\CommentTok{\# plot\_ly(x=colnames(df\_), y=rownames(df\_), z=sqrt(df\_), type = "heatmap", zauto=F, zmax=0.5)}

\FunctionTok{plot\_ly}\NormalTok{(}\AttributeTok{data =}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(return)), }\AttributeTok{x=}\SpecialCharTok{\textasciitilde{}}\FunctionTok{sqrt}\NormalTok{(var), }\AttributeTok{y=}\SpecialCharTok{\textasciitilde{}}\NormalTok{return, }\AttributeTok{name=}\SpecialCharTok{\textasciitilde{}}\NormalTok{index, }\AttributeTok{mode=}\StringTok{"lines"}\NormalTok{, }\AttributeTok{type =} \StringTok{\textquotesingle{}scatter\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{Master_Thesis_files/figure-latex/unnamed-chunk-13-1.pdf}

\hypertarget{simple_particle_swarm_optimization}{%
\chapter{Simple\_Particle\_Swarm\_Optimization}\label{simple_particle_swarm_optimization}}

first pso examples and explainations

  \bibliography{book.bib,packages.bib}

\end{document}
