<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Challenges of Passiv Investing | Master-Thesis</title>
  <meta name="description" content="This GitBook is an example of a GitBook for teaching. It can be adapted for specific courses. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Challenges of Passiv Investing | Master-Thesis" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This GitBook is an example of a GitBook for teaching. It can be adapted for specific courses. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="AxelCode-R/Master-Thesis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Challenges of Passiv Investing | Master-Thesis" />
  
  <meta name="twitter:description" content="This GitBook is an example of a GitBook for teaching. It can be adapted for specific courses. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Axel Roth" />


<meta name="date" content="2022-08-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="activ-vs-passiv-investing.html"/>
<link rel="next" href="analytical_solver.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A GitBook for Teaching</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="abstract.html"><a href="abstract.html"><i class="fa fa-check"></i><b>1</b> Abstract</a></li>
<li class="chapter" data-level="2" data-path="software-information-and-conventions.html"><a href="software-information-and-conventions.html"><i class="fa fa-check"></i><b>2</b> Software information and conventions</a></li>
<li class="chapter" data-level="3" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>3</b> Data Sources</a></li>
<li class="chapter" data-level="4" data-path="activ-vs-passiv-investing.html"><a href="activ-vs-passiv-investing.html"><i class="fa fa-check"></i><b>4</b> Activ vs Passiv Investing</a></li>
<li class="chapter" data-level="5" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html"><i class="fa fa-check"></i><b>5</b> Challenges of Passiv Investing</a>
<ul>
<li class="chapter" data-level="5.1" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#mean-variance-portfolio-mvp"><i class="fa fa-check"></i><b>5.1</b> Mean-variance portfolio (MVP)</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#mvp-calculation"><i class="fa fa-check"></i><b>5.1.1</b> MVP calculation</a></li>
<li class="chapter" data-level="5.1.2" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#mvp-example"><i class="fa fa-check"></i><b>5.1.2</b> MVP example</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#index-tracking-portfolio-itp"><i class="fa fa-check"></i><b>5.2</b> Index-tracking portfolio (ITP)</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#example-itp"><i class="fa fa-check"></i><b>5.2.1</b> Example ITP</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="analytical_solver.html"><a href="analytical_solver.html"><i class="fa fa-check"></i><b>6</b> Analytical_Solver</a></li>
<li class="chapter" data-level="7" data-path="simple_particle_swarm_optimization.html"><a href="simple_particle_swarm_optimization.html"><i class="fa fa-check"></i><b>7</b> Simple_Particle_Swarm_Optimization</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Master-Thesis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="challenges-of-passiv-investing" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Challenges of Passiv Investing<a href="challenges-of-passiv-investing.html#challenges-of-passiv-investing" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this Chapter we will discuss two common challenges of Passiv-Investing and create simple examples to test the PSO. The first one is the mean-variance portfolio (MVP) from the modern portfolio theory of Markowitz which is simply said an optimal allocation of assets regarding risk and return. The second challenge is the index-tracking-problem which tries to construct a portfolio which has a minimal tracking error to a given benchmark.</p>
<div id="mean-variance-portfolio-mvp" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Mean-variance portfolio (MVP)<a href="challenges-of-passiv-investing.html#mean-variance-portfolio-mvp" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Markowitz has shown that diversifying the risk on multiple assets will reduce the overall risk of the portfolio. This result was the beginning of the widely used modern portfolio theorie which uses mathematical models to archive portfolios with minimal variance for a given return target. All these optimal portfolios for a given return target are called efficient and create the efficient frontier.</p>
<div id="mvp-calculation" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> MVP calculation<a href="challenges-of-passiv-investing.html#mvp-calculation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have <span class="math inline">\(N\)</span> assets and its returns on <span class="math inline">\(T\)</span> diffrent days which creates a return matrix <span class="math inline">\(R\)</span>. Each element <span class="math inline">\(R_{t,i}\)</span> contains the return of the <span class="math inline">\(i\)</span>-th asset on day <span class="math inline">\(t\)</span>. The covariance matrix of the returns is <span class="math inline">\(\textstyle\sum\)</span> and the expected returns are <span class="math inline">\(\mu\)</span>. The MVP with risk aversion parameter <span class="math inline">\(\lambda\)</span> like shown in <span class="citation">(<a href="#ref-Mar2005" role="doc-biblioref">Maringer 2005</a>)</span> minimizes the following problem:</p>
<p><code>file:///C:/Users/Axel/Desktop/Master-Thesis-All/Ziel%20was%20beantwortet%20werden%20soll/Quellen%20nur%20wichtige/Maringer2005_Book_PortfolioManagementWithHeurist.pdf</code>
<code>https://bookdown.org/shenjian0824/portr/port-opt.html</code>
<span class="math display" id="eq:MVP">\[\begin{equation}
\underset{w}{minimize} \ \ \ \lambda \ w^T \textstyle\sum w - (1-\lambda) \ w^T\mu
\tag{5.1}
\end{equation}\]</span></p>
<p>The risk aversion parameter <span class="math inline">\(\lambda\)</span> defines the trade-off between risk and return. <span class="math inline">\(\lambda = 1\)</span> results in a minimum variance portfolio and <span class="math inline">\(\lambda = 0\)</span> results in a maximum return portfolio. All possible <span class="math inline">\(\lambda \in [0, 1]\)</span> represent the efficient frontier.</p>
</div>
<div id="mvp-example" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> MVP example<a href="challenges-of-passiv-investing.html#mvp-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will analyse a small example to understand the meaning of the efficient frontier without going into detail how it was solved. First of all we are pulling the daily returns of 3 tickers (IBM, Google and Apple).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="challenges-of-passiv-investing.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#```{r, fig.asp=0.4, fig.align=&#39;center&#39;, out.width=&quot;100%&quot;}</span></span>
<span id="cb1-2"><a href="challenges-of-passiv-investing.html#cb1-2" aria-hidden="true" tabindex="-1"></a>returns <span class="ot">&lt;-</span> <span class="fu">get_prices_and_returns_av</span>(<span class="at">choosen_tickers =</span> <span class="fu">c</span>(<span class="st">&quot;IBM&quot;</span>, <span class="st">&quot;GOOG&quot;</span>, <span class="st">&quot;AAPL&quot;</span>), <span class="at">min_date =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="at">max_date =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2021-01-01&quot;</span>))[[<span class="st">&quot;daily_returns&quot;</span>]]</span>
<span id="cb1-3"><a href="challenges-of-passiv-investing.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="challenges-of-passiv-investing.html#cb1-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plotly_line_chart_xts</span>(<span class="fu">ret_to_cumret</span>(returns))</span>
<span id="cb1-5"><a href="challenges-of-passiv-investing.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="challenges-of-passiv-investing.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># if(pandoc_to()==&quot;html&quot;){</span></span>
<span id="cb1-7"><a href="challenges-of-passiv-investing.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   p</span></span>
<span id="cb1-8"><a href="challenges-of-passiv-investing.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># }else{</span></span>
<span id="cb1-9"><a href="challenges-of-passiv-investing.html#cb1-9" aria-hidden="true" tabindex="-1"></a>htmlwidgets<span class="sc">::</span><span class="fu">saveWidget</span>(p, <span class="st">&quot;p.html&quot;</span>)</span>
<span id="cb1-10"><a href="challenges-of-passiv-investing.html#cb1-10" aria-hidden="true" tabindex="-1"></a>webshot2<span class="sc">::</span><span class="fu">webshot</span>(<span class="st">&quot;p.html&quot;</span>, <span class="st">&quot;p.png&quot;</span>, <span class="at">delay=</span><span class="dv">1</span>, <span class="at">zoom=</span><span class="dv">4</span>, <span class="at">vheight=</span><span class="dv">300</span>, <span class="at">vwidth =</span> <span class="dv">600</span>)</span></code></pre></div>
<p><img src="gitbook-demo_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="challenges-of-passiv-investing.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span></code></pre></div>
<p>Now we can calculate the expected daily returns and the covariance matrix for the 3 assets:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="challenges-of-passiv-investing.html#cb3-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">as.vector</span>((<span class="fu">last</span>(<span class="fu">ret_to_cumret</span>(returns))<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="fu">nrow</span>(returns))<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb3-2"><a href="challenges-of-passiv-investing.html#cb3-2" aria-hidden="true" tabindex="-1"></a>mu</span></code></pre></div>
<pre><code>## [1]  0.00237647165  0.00106873765 -0.00004734503</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="challenges-of-passiv-investing.html#cb5-1" aria-hidden="true" tabindex="-1"></a>cov <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">nearPD</span>(<span class="fu">cov</span>(returns))<span class="sc">$</span>mat)</span>
<span id="cb5-2"><a href="challenges-of-passiv-investing.html#cb5-2" aria-hidden="true" tabindex="-1"></a>cov</span></code></pre></div>
<pre><code>##              AAPL         GOOG          IBM
## AAPL 0.0008635447 0.0005337733 0.0004356540
## GOOG 0.0005337733 0.0005827306 0.0004086774
## IBM  0.0004356540 0.0004086774 0.0006625236</code></pre>
<p>At this moment we have all the needed data to solve the MVP <a href="challenges-of-passiv-investing.html#eq:MVP">(5.1)</a> with <span class="math inline">\(\lambda \in \{0.01, 0.02, ..., 0.99, 1\}\)</span>. Afterwords we calculate the annual returns and standard deviation and draw the efficient frontier and the composition of the portfolios:</p>
<div id="htmlwidget-731dac676ff6f6b4be8f" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-731dac676ff6f6b4be8f">{"x":{"visdat":{"37d0c423a49":["function () ","plotlyVisDat"]},"cur_data":"37d0c423a49","attrs":{"37d0c423a49":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"lines","name":"efficient frontier","inherit":true},"37d0c423a49.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"mode":"markers","name":"lambda steps","inherit":true}},"layout":{"margin":{"b":70,"l":10,"t":50,"r":10,"pad":4},"title":"3-Asset MVP","yaxis":{"domain":[0,1],"automargin":true,"range":[0.170656108329866,0.900646864646179],"title":"mu"},"xaxis":{"domain":[0,1],"automargin":true,"range":[0.340918553353742,0.48981489610733],"title":"sd"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[0.358861635109203,0.359188158390797,0.360192657190142,0.361911212970297,0.36437776573774,0.367623671777719,0.371677340222236,0.37656396949775,0.38230539845014,0.388920079203729,0.396423170511987,0.403281513421866,0.407937433874326,0.413110951560003,0.418818663769894,0.425076721086357,0.431900840818243,0.439306338191365,0.447308174901527,0.455921024178987,0.465159351135194,0.466490377245071,0.466490377245073,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245076,0.466490377245076],"y":[0.189617898144295,0.217532955763366,0.246690303697647,0.277166026326946,0.309042095376496,0.342406919169904,0.377355951849941,0.413992370069738,0.452427825720571,0.492783284486177,0.535189961441227,0.571699547989509,0.59465941361875,0.618492792281598,0.643247722510884,0.66897568445295,0.695731903585194,0.723575686310253,0.752570791312273,0.782785841098472,0.814294778776371,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072],"type":"scatter","mode":"lines","name":"efficient frontier","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245071,0.466490377245074,0.466490377245076,0.466490377245076,0.466490377245074,0.466490377245074,0.466490377245073,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.466490377245074,0.465159351135194,0.455921024178987,0.447308174901527,0.439306338191365,0.431900840818243,0.425076721086357,0.418818663769894,0.413110951560003,0.407937433874326,0.403281513421866,0.396423170511987,0.388920079203729,0.38230539845014,0.37656396949775,0.371677340222236,0.367623671777719,0.36437776573774,0.361911212970297,0.360192657190142,0.359188158390797,0.358861635109203],"y":[0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.818769876951072,0.814294778776371,0.782785841098472,0.752570791312273,0.723575686310253,0.695731903585194,0.66897568445295,0.643247722510884,0.618492792281598,0.59465941361875,0.571699547989509,0.535189961441227,0.492783284486177,0.452427825720571,0.413992370069738,0.377355951849941,0.342406919169904,0.309042095376496,0.277166026326946,0.246690303697647,0.217532955763366,0.189617898144295],"mode":"markers","name":"lambda steps","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="htmlwidget-a7a6b1fa99775704f0d0" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a7a6b1fa99775704f0d0">{"x":{"visdat":{"37d07b4e4d96":["function () ","plotlyVisDat"]},"cur_data":"37d07b4e4d96","attrs":{"37d07b4e4d96":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"37d07b4e4d96.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[1,1,1,1,1,0.999999999999993,1,1,1,1,1,0.999999999999996,1,1,1,1,1,0.999999999999998,1,1,1,0.999999999999998,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.992506780716437,0.939220395443648,0.887233678104342,0.836499652749116,0.786973580378538,0.738612827357856,0.691376743012074,0.645226545662746,0.600125216434994,0.556037400223596,0.507538707812945,0.457201836959338,0.407959245906897,0.359775635307196,0.312617207911745,0.266451589514092,0.221247754833057,0.176975957980498,0.133607667186154,0.091115503478564,0.0494731830451258],"name":"AAPL","inherit":true},"37d07b4e4d96.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8.88178419700125e-16,-8.88178419700125e-16,0,0,8.88178419700125e-16,0,0,0,0,0,0,-4.44089209850063e-16,0,-4.44089209850063e-16,4.44089209850063e-16,0,0,4.44089209850063e-16,0,0,0,0,0,0,0,0,0,2.22044604925031e-16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1.11022302462516e-16,0,0,1.11022302462516e-16,0,0,0,0,0,0,0,0,0,0,0,5.55111512312578e-17,0.00749321928356331,0.0607796045563517,0.112766321895658,0.163500347250884,0.213026419621462,0.261387172642144,0.308623256987926,0.354773454337254,0.399874783565006,0.443962599776404,0.465575023615388,0.475132078979933,0.484481372271336,0.493629605491956,0.502583195452563,0.51134828878242,0.519930776001238,0.5283363047207,0.536570292037723,0.544637936176625,0.552544227432749],"name":"GOOG","inherit":true},"37d07b4e4d96.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-8.88178419700125e-16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-4.44089209850063e-16,0,0,4.44089209850063e-16,-4.44089209850063e-16,-4.44089209850063e-16,0,0,4.44089209850063e-16,0,4.44089209850063e-16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.11022302462516e-16,0,0,0,0,0,0,0,0,5.55111512312578e-17,5.55111512312578e-17,0,6.93889390390723e-18,0,0.0268862685716675,0.0676660840607289,0.107559381821767,0.146594759200848,0.184799596635692,0.222200121703488,0.258821469165704,0.294687737298802,0.329822040776123,0.364246560344811,0.397982589522125],"name":"IBM","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Portfolio compositions","barmode":"stack","xaxis":{"domain":[0,1],"automargin":true,"title":"lambda","autorange":"reversed"},"yaxis":{"domain":[0,1],"automargin":true,"title":"wgt"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"type":"bar","x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[1,1,1,1,1,0.999999999999993,1,1,1,1,1,0.999999999999996,1,1,1,1,1,0.999999999999998,1,1,1,0.999999999999998,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.992506780716437,0.939220395443648,0.887233678104342,0.836499652749116,0.786973580378538,0.738612827357856,0.691376743012074,0.645226545662746,0.600125216434994,0.556037400223596,0.507538707812945,0.457201836959338,0.407959245906897,0.359775635307196,0.312617207911745,0.266451589514092,0.221247754833057,0.176975957980498,0.133607667186154,0.091115503478564,0.0494731830451258],"name":"AAPL","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"type":"bar","x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8.88178419700125e-16,-8.88178419700125e-16,0,0,8.88178419700125e-16,0,0,0,0,0,0,-4.44089209850063e-16,0,-4.44089209850063e-16,4.44089209850063e-16,0,0,4.44089209850063e-16,0,0,0,0,0,0,0,0,0,2.22044604925031e-16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1.11022302462516e-16,0,0,1.11022302462516e-16,0,0,0,0,0,0,0,0,0,0,0,5.55111512312578e-17,0.00749321928356331,0.0607796045563517,0.112766321895658,0.163500347250884,0.213026419621462,0.261387172642144,0.308623256987926,0.354773454337254,0.399874783565006,0.443962599776404,0.465575023615388,0.475132078979933,0.484481372271336,0.493629605491956,0.502583195452563,0.51134828878242,0.519930776001238,0.5283363047207,0.536570292037723,0.544637936176625,0.552544227432749],"name":"GOOG","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"type":"bar","x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-8.88178419700125e-16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-4.44089209850063e-16,0,0,4.44089209850063e-16,-4.44089209850063e-16,-4.44089209850063e-16,0,0,4.44089209850063e-16,0,4.44089209850063e-16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.11022302462516e-16,0,0,0,0,0,0,0,0,5.55111512312578e-17,5.55111512312578e-17,0,6.93889390390723e-18,0,0.0268862685716675,0.0676660840607289,0.107559381821767,0.146594759200848,0.184799596635692,0.222200121703488,0.258821469165704,0.294687737298802,0.329822040776123,0.364246560344811,0.397982589522125],"name":"IBM","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="index-tracking-portfolio-itp" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Index-tracking portfolio (ITP)<a href="challenges-of-passiv-investing.html#index-tracking-portfolio-itp" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Indices are baskets of assets which are used to track the performance of a specific group of assets. For example tracks the good known Standard and Poor’s 500 index (short: S&amp;P 500) the largest 500 equitys in the United States. All indices are not investible and only serve for the visualisation of the performance of these groups of assets without transaction costs. Asset managements adopted these indices as benchmarks to compare there fund performances. Each fund has its own benchmark which contains roughly the same assets that could be purchased by the manager. If the fund under performs his benchmark, it could be a indicator for a bad decision from the fund manager. Thats why all fund managers are eager to beat there benchmarks with wisely choosen investments. The past has proven that this is rearly achived with activ managemnt after costs (quelle studie activ passiv). This is the reason why passiv managed funds with the goal to track there benchmarks are becoming more frequent. Exactly this can be archived with Index-tracking portfolios (ITP) which aim to replicate the performance of a benchmark. This can be done by either full-replication or sparse-replication. A full-replication, which produces the exact performance we aim for, isn’t possible in most cases because not all assets of a index are investable. And if so it wouldnt be wise because benchmarks with multiple indices can contain more than ten thousand single assets which will produce a huge amount of transaction costs. The most common way to go is a sparse replication of the performance. To do so the portfolio manager has to define his benchmark which has a overlap with his investment universe of his fund. Afterwards he will reduce this universe by some rules of the investor, liqudity and availability. Now he can start to optimize a portfolio, including the investors constraint, to replicate the benchmark performance. Usually, this is done by reducing the difference between the daily returns of the ITP and the benchmark:</p>
<p><span class="math display">\[
minimize \ \ Var(r_{p}-r_{bm})
\]</span>
First we need to substitude <span class="math inline">\(r_{p}\)</span> to get the portfolio weights <span class="math inline">\(w\)</span> as follows:
<span class="math display">\[
  r_{p} = R * w
\]</span>
Afterwards we solve the Variance until it is displayed as a quadratic problem of <span class="math inline">\(w\)</span>:
<span class="math display">\[
Var(r_{p}-r_{bm}) = Var(R * w - r_{bm}) = Var(R * w) + Var(r_{bm}) - 2 \cdot Cov(R*w,r_{bm})
\]</span>
Now we need to solve each of the 3 terms, startign with the simplest</p>
<p><span class="math display">\[
Var(r_{bm}) = \sigma_{bm}^2 = constant
\]</span></p>
<p>The variance of the portfolio can be solved by looking at the proof in [<a href="http://www.math.kent.edu/~reichel/courses/monte.carlo/alt4.7d.pdf" class="uri">http://www.math.kent.edu/~reichel/courses/monte.carlo/alt4.7d.pdf</a> (proof auch selber machen)] at the linear combination of random variables section:
<span class="math display">\[
Var(R * w) = w^T * Cov(R) * w
\]</span></p>
<p>And the last term can be solved in general as (<a href="https://bookdown.org/compfinezbook/introcompfinr/Multivariate-Probability-Distributions-Using-Matrix-Algebra.html" class="uri">https://bookdown.org/compfinezbook/introcompfinr/Multivariate-Probability-Distributions-Using-Matrix-Algebra.html</a> 3.6.5):
<span class="math display">\[
  Cov(A*a, b) = Cov(b, A*a) = Cov(b, A)^T * a
\]</span></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="challenges-of-passiv-investing.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A = matrix(c(1,4,2,4,6,3,8,4,4,10), ncol=2)</span></span>
<span id="cb7-2"><a href="challenges-of-passiv-investing.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># a = c(0.2, 0.8)</span></span>
<span id="cb7-3"><a href="challenges-of-passiv-investing.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># b = c(4,4,5,5,7)</span></span>
<span id="cb7-4"><a href="challenges-of-passiv-investing.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb7-5"><a href="challenges-of-passiv-investing.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># cov(A %*% a, b)</span></span>
<span id="cb7-6"><a href="challenges-of-passiv-investing.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># t(a) %*% cov(A, b)</span></span>
<span id="cb7-7"><a href="challenges-of-passiv-investing.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># t(cov(A, b)) %*% a # das hier wird gebraucht</span></span></code></pre></div>
<p>This results in the final formula of the ITP:</p>
<p><span class="math display" id="eq:ITP">\[\begin{equation}
  \begin{split}
   Var(r_{p}-r_{bm}) &amp; = Var(R \times w - r_{bm}) \\
   &amp; = Var(R \times w) - 2 \cdot Cov(R \times w,r_{bm}) + Var(r_{bm})  \\
   &amp; = w^T \times Cov(R) \times w - 2 \cdot Cov(r_{bm}, R)^T \times w + \sigma_{bm}^2
   \end{split}
   \tag{5.2}
\end{equation}\]</span></p>
<p>The minimization problem of the ITP in the general stricture which all optimizers need is:
<span class="math display">\[
  min(\frac{1}{2} \cdot b^T \times D \times b -d^T \times b)
\]</span>
Because it is a minimization we can ignore constant terms and stretching coefficients and still find the same minimum. This results in the general substitution of the ITP as follows:
<span class="math display">\[
  D = Cov(R)
\]</span>
and
<span class="math display">\[
d = Cov(r_{bm}, R)
\]</span></p>
<p>Now we need to add some basic constraints like in the MVP, to sum up the weights to 1 and being long only.</p>
<div id="example-itp" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Example ITP<a href="challenges-of-passiv-investing.html#example-itp" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will show the results of tracking the S&amp;P 500 with a tracking portfolio that can only invest in IBM, Apple and Google without going into details:
222233333344445</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb8-1"><a href="challenges-of-passiv-investing.html#cb8-1" aria-hidden="true" tabindex="-1"></a>returns <span class="ot">&lt;-</span> <span class="fu">get_prices_and_returns_av</span>(<span class="at">choosen_tickers =</span> <span class="fu">c</span>(<span class="st">&quot;IBM&quot;</span>, <span class="st">&quot;GOOG&quot;</span>, <span class="st">&quot;AAPL&quot;</span>), <span class="at">min_date =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="at">max_date =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2021-01-01&quot;</span>))[[<span class="st">&quot;daily_returns&quot;</span>]]</span>
<span id="cb8-2"><a href="challenges-of-passiv-investing.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="challenges-of-passiv-investing.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:/Users/Axel/Desktop/Master-Thesis-All/Master-Thesis/data/spx_index_daily_adj_data.rdata&quot;</span>)</span>
<span id="cb8-4"><a href="challenges-of-passiv-investing.html#cb8-4" aria-hidden="true" tabindex="-1"></a>spx_returns <span class="ot">&lt;-</span> spx_index_daily_adj_data<span class="sc">$</span>daily_returns[<span class="st">&quot;2020-01-01/2021-01-01&quot;</span>,]</span>
<span id="cb8-5"><a href="challenges-of-passiv-investing.html#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="challenges-of-passiv-investing.html#cb8-6" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-7"><a href="challenges-of-passiv-investing.html#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Dmat =</span> <span class="fu">cov</span>(returns),</span>
<span id="cb8-8"><a href="challenges-of-passiv-investing.html#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">dvec =</span> <span class="fu">cov</span>(returns, spx_returns),</span>
<span id="cb8-9"><a href="challenges-of-passiv-investing.html#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Amat =</span> <span class="fu">t</span>(<span class="fu">rbind</span>(</span>
<span id="cb8-10"><a href="challenges-of-passiv-investing.html#cb8-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">ncol</span>(returns)), <span class="co"># sum up to 1</span></span>
<span id="cb8-11"><a href="challenges-of-passiv-investing.html#cb8-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">diag</span>(<span class="dv">1</span>, <span class="at">nrow=</span><span class="fu">ncol</span>(returns), <span class="at">ncol=</span><span class="fu">ncol</span>(returns)) <span class="co"># long only</span></span>
<span id="cb8-12"><a href="challenges-of-passiv-investing.html#cb8-12" aria-hidden="true" tabindex="-1"></a>    )),</span>
<span id="cb8-13"><a href="challenges-of-passiv-investing.html#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">bvec =</span> <span class="fu">c</span>(</span>
<span id="cb8-14"><a href="challenges-of-passiv-investing.html#cb8-14" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span>, <span class="co"># sum up to 1</span></span>
<span id="cb8-15"><a href="challenges-of-passiv-investing.html#cb8-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">ncol</span>(returns)) <span class="co"># long only</span></span>
<span id="cb8-16"><a href="challenges-of-passiv-investing.html#cb8-16" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb8-17"><a href="challenges-of-passiv-investing.html#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">meq =</span> <span class="dv">1</span></span>
<span id="cb8-18"><a href="challenges-of-passiv-investing.html#cb8-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-19"><a href="challenges-of-passiv-investing.html#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="challenges-of-passiv-investing.html#cb8-20" aria-hidden="true" tabindex="-1"></a>qp <span class="ot">&lt;-</span> <span class="fu">solve.QP</span>(<span class="at">Dmat =</span> mat<span class="sc">$</span>Dmat, <span class="at">dvec =</span> mat<span class="sc">$</span>dvec, <span class="at">Amat =</span> mat<span class="sc">$</span>Amat, <span class="at">bvec =</span> mat<span class="sc">$</span>bvec, <span class="at">meq =</span> mat<span class="sc">$</span>meq)</span>
<span id="cb8-21"><a href="challenges-of-passiv-investing.html#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="challenges-of-passiv-investing.html#cb8-22" aria-hidden="true" tabindex="-1"></a>port_returns <span class="ot">&lt;-</span> <span class="fu">xts</span>(returns <span class="sc">%*%</span> qp<span class="sc">$</span>solution, <span class="at">order.by=</span><span class="fu">index</span>(returns)) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(., <span class="st">&quot;tracking portfolio&quot;</span>)</span>
<span id="cb8-23"><a href="challenges-of-passiv-investing.html#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="challenges-of-passiv-investing.html#cb8-24" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plotly_line_chart_xts</span>(<span class="fu">ret_to_cumret</span>(<span class="fu">cbind.xts</span>(port_returns, spx_returns)))</span>
<span id="cb8-25"><a href="challenges-of-passiv-investing.html#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="challenges-of-passiv-investing.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="fu">setNames</span>(qp<span class="sc">$</span>solution, <span class="fu">colnames</span>(returns))</span></code></pre></div>
<pre><code>##      AAPL      GOOG       IBM 
## 0.2597104 0.3308051 0.4094845</code></pre>
<p><img src="gitbook-demo_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<style> 
 
.code_fold_it:hover { 
  background-color: #a8a8a84f; 
} 
.code_fold_it_collapsed:hover { 
  background-color: #a8a8a84f; 
} 
.example_data_fold_it:hover { 
  background-color: #a8a8a84f; 
} 
.example_data_fold_it_collapsed:hover { 
  background-color: #a8a8a84f; 
} 
.result_fold_it:hover { 
  background-color: #a8a8a84f; 
} 
.result_fold_it_collapsed:hover { 
  background-color: #a8a8a84f; 
} 
 
.arrow { 
  border: solid black; 
  border-width: 0 3px 3px 0; 
  display: inline-block; 
  padding: 3px; 
} 
.down { 
  position:relative; 
  top:-1px; 
  transform: rotate(45deg); 
  -webkit-transform: rotate(45deg); 
} 
.placeholder_txt { 
  position:relative; 
  top:-10px; 
} </style>
<script type='text/javascript'> 
var coll = document.getElementsByClassName("code_fold_it"); 
var i; 
for (i = 0; i < coll.length; i++) { 
  coll[i].addEventListener("click", function() { 
    this.classList.toggle("active"); 
    var content = this; 
    if (content.style.height === "1em") { 
      content.style.overflowX = "auto"; 
      content.style.height = "auto"; 
      content.innerHTML = content.innerHTML.replace('<p class="placeholder_txt">Code <i class="arrow down"></i></p><br>',""); 
    } else { 
      content.style.overflow = "hidden"; 
      content.style.height = "1em"; 
      content.innerHTML = '<p class="placeholder_txt">Code <i class="arrow down"></i></p><br>' + content.innerHTML; 
    } 
  }); 
} 
 
 
 
var coll = document.getElementsByClassName("code_fold_it_collapsed"); 
var i; 
for (i = 0; i < coll.length; i++) { 
  coll[i].style.overflow = "hidden"; 
  coll[i].style.height = "1em"; 
  coll[i].innerHTML = '<p class="placeholder_txt">Code <i class="arrow down"></i></p><br>' + coll[i].innerHTML; 
  coll[i].addEventListener("click", function() { 
    this.classList.toggle("active"); 
    var content = this; 
    if (content.style.height === "1em") { 
      content.style.overflowX = "auto"; 
      content.style.height = "auto"; 
      content.innerHTML = content.innerHTML.replace('<p class="placeholder_txt">Code <i class="arrow down"></i></p><br>',""); 
    } else { 
      content.style.overflow = "hidden"; 
      content.style.height = "1em"; 
      content.innerHTML = '<p class="placeholder_txt">Code <i class="arrow down"></i></p><br>' + content.innerHTML; 
    } 
  }); 
} 
 
 
 
 
 
 
var coll = document.getElementsByClassName("example_data_fold_it"); 
var i; 
for (i = 0; i < coll.length; i++) { 
  coll[i].addEventListener("click", function() { 
    this.classList.toggle("active"); 
    var content = this; 
    if (content.style.height === "1em") { 
      content.style.overflowX = "auto"; 
      content.style.height = "auto"; 
      content.innerHTML = content.innerHTML.replace('<p class="placeholder_txt">Bsp Daten <i class="arrow down"></i></p><br>',""); 
    } else { 
      content.style.overflow = "hidden"; 
      content.style.height = "1em"; 
      content.innerHTML = '<p class="placeholder_txt">Bsp Daten <i class="arrow down"></i></p><br>' + content.innerHTML; 
    } 
  }); 
} 
 
 
 
var coll = document.getElementsByClassName("example_data_fold_it_collapsed"); 
var i; 
for (i = 0; i < coll.length; i++) { 
  coll[i].style.overflow = "hidden"; 
  coll[i].style.height = "1em"; 
  coll[i].innerHTML = '<p class="placeholder_txt">Bsp Daten <i class="arrow down"></i></p><br>' + coll[i].innerHTML; 
  coll[i].addEventListener("click", function() { 
    this.classList.toggle("active"); 
    var content = this; 
    if (content.style.height === "1em") { 
      content.style.overflowX = "auto"; 
      content.style.height = "auto"; 
      content.innerHTML = content.innerHTML.replace('<p class="placeholder_txt">Bsp Daten <i class="arrow down"></i></p><br>',""); 
    } else { 
      content.style.overflow = "hidden"; 
      content.style.height = "1em"; 
      content.innerHTML = '<p class="placeholder_txt">Bsp Daten <i class="arrow down"></i></p><br>' + content.innerHTML; 
    } 
  }); 
} 
 
 
 
 
 
var coll = document.getElementsByClassName("result_fold_it"); 
var i; 
for (i = 0; i < coll.length; i++) { 
  coll[i].addEventListener("click", function() { 
    this.classList.toggle("active"); 
    var content = this; 
    if (content.style.height === "1em") { 
      content.style.overflowX = "auto"; 
      content.style.height = "auto"; 
      content.innerHTML = content.innerHTML.replace('<p class="placeholder_txt">Result <i class="arrow down"></i></p><br>',""); 
    } else { 
      content.style.overflow = "hidden"; 
      content.style.height = "1em"; 
      content.innerHTML = '<p class="placeholder_txt">Result <i class="arrow down"></i></p><br>' + content.innerHTML; 
    } 
  }); 
} 
 
 
 
var coll = document.getElementsByClassName("result_fold_it_collapsed"); 
var i; 
for (i = 0; i < coll.length; i++) { 
  coll[i].style.overflow = "hidden"; 
  coll[i].style.height = "1em"; 
  coll[i].innerHTML = '<p class="placeholder_txt">Result <i class="arrow down"></i></p><br>' + coll[i].innerHTML; 
  coll[i].addEventListener("click", function() { 
    this.classList.toggle("active"); 
    var content = this; 
    if (content.style.height === "1em") { 
      content.style.overflowX = "auto"; 
      content.style.height = "auto"; 
      content.innerHTML = content.innerHTML.replace('<p class="placeholder_txt">Result <i class="arrow down"></i></p><br>',""); 
    } else { 
      content.style.overflow = "hidden"; 
      content.style.height = "1em"; 
      content.innerHTML = '<p class="placeholder_txt">Result <i class="arrow down"></i></p><br>' + content.innerHTML; 
    } 
  }); 
} </script>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Mar2005" class="csl-entry">
Maringer, Dientmar. 2005. <em>Portfolio Management with Heuristic Optimization</em>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="activ-vs-passiv-investing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analytical_solver.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cjvanlissa/gitbook-demo/edit/master/2_Challenges_of_Passiv_Investing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["gitbook-demo.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
