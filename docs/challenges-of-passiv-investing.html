<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Challenges of Passiv Investing | Master-Thesis</title>
  <meta name="description" content="This GitBook is an example of a GitBook for teaching. It can be adapted for specific courses. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Challenges of Passiv Investing | Master-Thesis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This GitBook is an example of a GitBook for teaching. It can be adapted for specific courses. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="AxelCode-R/Master-Thesis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Challenges of Passiv Investing | Master-Thesis" />
  
  <meta name="twitter:description" content="This GitBook is an example of a GitBook for teaching. It can be adapted for specific courses. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Axel Roth" />


<meta name="date" content="2022-08-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="activ-vs-passiv-investing.html"/>
<link rel="next" href="analytical_solver.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="my_style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Master Thesis Axel Roth</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="abstract.html"><a href="abstract.html"><i class="fa fa-check"></i><b>1</b> Abstract</a></li>
<li class="chapter" data-level="2" data-path="software-information-and-usage.html"><a href="software-information-and-usage.html"><i class="fa fa-check"></i><b>2</b> Software information and usage</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software-information-and-usage.html"><a href="software-information-and-usage.html#r-version-and-packages"><i class="fa fa-check"></i><b>2.1</b> R-Version and Packages</a></li>
<li class="chapter" data-level="2.2" data-path="software-information-and-usage.html"><a href="software-information-and-usage.html#reproducibility"><i class="fa fa-check"></i><b>2.2</b> reproducibility</a></li>
<li class="chapter" data-level="2.3" data-path="software-information-and-usage.html"><a href="software-information-and-usage.html#r-functions"><i class="fa fa-check"></i><b>2.3</b> R-functions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="open-data-sources.html"><a href="open-data-sources.html"><i class="fa fa-check"></i><b>3</b> Open Data Sources</a>
<ul>
<li class="chapter" data-level="3.1" data-path="open-data-sources.html"><a href="open-data-sources.html#r-functions-1"><i class="fa fa-check"></i><b>3.1</b> R-functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html"><i class="fa fa-check"></i><b>4</b> Mathematical Fundations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#basic-operators"><i class="fa fa-check"></i><b>4.1</b> Basic Operators</a></li>
<li class="chapter" data-level="4.2" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#return-calculation"><i class="fa fa-check"></i><b>4.2</b> Return calculation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#daily-returns"><i class="fa fa-check"></i><b>4.2.1</b> daily returns</a></li>
<li class="chapter" data-level="4.2.2" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#annualized-returns"><i class="fa fa-check"></i><b>4.2.2</b> annualized returns</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#markowitz-modern-portfolio-theory-mpt"><i class="fa fa-check"></i><b>4.3</b> Markowitz Modern Portfolio Theory (MPT)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#assumptions-of-markowitz-portfolio-theory"><i class="fa fa-check"></i><b>4.3.1</b> Assumptions of Markowitz Portfolio Theory</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#portfolio-math"><i class="fa fa-check"></i><b>4.4</b> Portfolio Math</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#expected-returns"><i class="fa fa-check"></i><b>4.4.1</b> expected returns</a></li>
<li class="chapter" data-level="4.4.2" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#expected-portfolio-return"><i class="fa fa-check"></i><b>4.4.2</b> expected portfolio return</a></li>
<li class="chapter" data-level="4.4.3" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#portfolio-returns"><i class="fa fa-check"></i><b>4.4.3</b> portfolio returns</a></li>
<li class="chapter" data-level="4.4.4" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#covariance"><i class="fa fa-check"></i><b>4.4.4</b> Covariance</a></li>
<li class="chapter" data-level="4.4.5" data-path="mathematical-fundations.html"><a href="mathematical-fundations.html#portfolio-variance"><i class="fa fa-check"></i><b>4.4.5</b> Portfolio Variance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="activ-vs-passiv-investing.html"><a href="activ-vs-passiv-investing.html"><i class="fa fa-check"></i><b>5</b> Activ vs Passiv Investing</a></li>
<li class="chapter" data-level="6" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html"><i class="fa fa-check"></i><b>6</b> Challenges of Passiv Investing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#mean-variance-portfolio-mvp"><i class="fa fa-check"></i><b>6.1</b> Mean-variance portfolio (MVP)</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#mvp"><i class="fa fa-check"></i><b>6.1.1</b> MVP</a></li>
<li class="chapter" data-level="6.1.2" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#mvp-example"><i class="fa fa-check"></i><b>6.1.2</b> MVP example</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#index-tracking-portfolio-itp"><i class="fa fa-check"></i><b>6.2</b> Index-tracking portfolio (ITP)</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="challenges-of-passiv-investing.html"><a href="challenges-of-passiv-investing.html#example-itp"><i class="fa fa-check"></i><b>6.2.1</b> Example ITP</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="analytical_solver.html"><a href="analytical_solver.html"><i class="fa fa-check"></i><b>7</b> Analytical_Solver</a></li>
<li class="chapter" data-level="8" data-path="simple_particle_swarm_optimization.html"><a href="simple_particle_swarm_optimization.html"><i class="fa fa-check"></i><b>8</b> Simple_Particle_Swarm_Optimization</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/AxelCode-R/Master-Thesis" target="blank">GitHub Repository</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Master-Thesis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="challenges-of-passiv-investing" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Challenges of Passiv Investing</h1>
<p>In this Chapter we will discuss two common challenges of Passiv-Investing and create simple examples to test the PSO. The first one is the mean-variance portfolio (MVP) from the modern portfolio theory of Markowitz which is simply said an optimal allocation of assets regarding risk and return. The second challenge is the index-tracking-problem which tries to construct a portfolio which has a minimal tracking error to a given benchmark.</p>
<div id="mean-variance-portfolio-mvp" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Mean-variance portfolio (MVP)</h2>
<p>Markowitz has shown that diversifying the risk on multiple assets will reduce the overall risk of the portfolio. This result was the beginning of the widely used modern portfolio theorie which uses mathematical models to archive portfolios with minimal variance for a given return target. All these optimal portfolios for a given return target are called efficient and create the efficient frontier.</p>
<div id="mvp" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> MVP</h3>
<p>We have <span class="math inline">\(N\)</span> assets and its returns on <span class="math inline">\(T\)</span> different days which creates a return matrix <span class="math inline">\(R \in \mathbb{R}^{T \times N}\)</span>. Each element <span class="math inline">\(R_{t,i}\)</span> contains the return of the <span class="math inline">\(i\)</span>-th asset on day <span class="math inline">\(t\)</span>. The covariance matrix of the returns is <span class="math inline">\(\textstyle\sum \in \mathbb{R}^{N \times N}\)</span> and the expected returns are <span class="math inline">\(\mu \in \mathbb{R}^{N}\)</span>. The MVP with risk aversion parameter <span class="math inline">\(\lambda \in [0,1]\)</span> like shown in <span class="citation">(<a href="#ref-Mari2005" role="doc-biblioref">Maringer 2005</a>)</span> can be formalized as follows:
<span class="math display" id="eq:MVP">\[\begin{equation} 
\underset{w}{minimize} \ \ \ \lambda \ w^T \textstyle\sum w - (1-\lambda) \ \mu^T w
\tag{6.1}
\end{equation}\]</span></p>
<p>The risk aversion parameter <span class="math inline">\(\lambda\)</span> defines the trade-off between risk and return. With <span class="math inline">\(\lambda = 1\)</span>, the minimization problem only contains the the variance term and so on results in a minimum variance portfolio and <span class="math inline">\(\lambda = 0\)</span> transforms the problem to a minimization of the negative expected returns so on results in a maximum return portfolio. All possible <span class="math inline">\(\lambda \in [0, 1]\)</span> represent the efficient frontier.</p>
</div>
<div id="mvp-example" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> MVP example</h3>
<p>We will analyze a small example to understand the meaning of the efficient frontier without going into detail how it was solved. First of all we are loading the daily returns of IBM, Google and Apple from the year 2020.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb1-1"><a href="challenges-of-passiv-investing.html#cb1-1" aria-hidden="true" tabindex="-1"></a>returns <span class="ot">&lt;-</span> <span class="fu">buffer</span>(</span>
<span id="cb1-2"><a href="challenges-of-passiv-investing.html#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_yf</span>(<span class="at">tickers =</span> <span class="fu">c</span>(<span class="st">&quot;IBM&quot;</span>, <span class="st">&quot;GOOG&quot;</span>, <span class="st">&quot;AAPL&quot;</span>), <span class="at">from =</span> <span class="st">&quot;2020-01-01&quot;</span>, <span class="at">to =</span> <span class="st">&quot;2020-12-31&quot;</span>)<span class="sc">$</span>returns, </span>
<span id="cb1-3"><a href="challenges-of-passiv-investing.html#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;3_assets&quot;</span></span>
<span id="cb1-4"><a href="challenges-of-passiv-investing.html#cb1-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The cumulated daily returns are:</p>
<p><img src="Master_Thesis_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Now we can calculate the expected daily returns and the covariance matrix for the 3 assets:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="challenges-of-passiv-investing.html#cb2-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">as.vector</span>((<span class="fu">last</span>(<span class="fu">ret_to_cumret</span>(returns))<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="fu">nrow</span>(returns))<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="challenges-of-passiv-investing.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(., <span class="fu">colnames</span>(returns))</span>
<span id="cb2-3"><a href="challenges-of-passiv-investing.html#cb2-3" aria-hidden="true" tabindex="-1"></a>mu</span></code></pre></div>
<pre><code>##           AAPL            IBM           GOOG 
##  0.00237641721 -0.00004622149  0.00106873786</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="challenges-of-passiv-investing.html#cb4-1" aria-hidden="true" tabindex="-1"></a>cov <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">nearPD</span>(<span class="fu">cov</span>(returns))<span class="sc">$</span>mat)</span>
<span id="cb4-2"><a href="challenges-of-passiv-investing.html#cb4-2" aria-hidden="true" tabindex="-1"></a>cov</span></code></pre></div>
<pre><code>##              AAPL          IBM         GOOG
## AAPL 0.0008635696 0.0004356282 0.0005337719
## IBM  0.0004356282 0.0006626219 0.0004086728
## GOOG 0.0005337719 0.0004086728 0.0005827306</code></pre>
<p>We now have all the necessary data to solve the MVP <a href="challenges-of-passiv-investing.html#eq:MVP">(6.1)</a> with <span class="math inline">\(\lambda \in \{0.01, 0.02, ..., 0.99, 1\}\)</span>. We calculate all 100 portfolios by solving the quadratic minimization problem for each <span class="math inline">\(\lambda\)</span>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb6-1"><a href="challenges-of-passiv-investing.html#cb6-1" aria-hidden="true" tabindex="-1"></a>portfolios <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb6-2"><a href="challenges-of-passiv-investing.html#cb6-2" aria-hidden="true" tabindex="-1"></a>mu_and_var <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb6-3"><a href="challenges-of-passiv-investing.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(lambda <span class="cf">in</span> <span class="fu">seq</span>(<span class="fl">0.01</span>,<span class="dv">1</span>, <span class="fl">0.01</span>)){</span>
<span id="cb6-4"><a href="challenges-of-passiv-investing.html#cb6-4" aria-hidden="true" tabindex="-1"></a>    mat <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-5"><a href="challenges-of-passiv-investing.html#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">Dmat =</span> lambda <span class="sc">*</span> cov,</span>
<span id="cb6-6"><a href="challenges-of-passiv-investing.html#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">dvec =</span> (<span class="dv">1</span> <span class="sc">-</span> lambda) <span class="sc">*</span> mu,</span>
<span id="cb6-7"><a href="challenges-of-passiv-investing.html#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">Amat =</span> <span class="fu">t</span>(<span class="fu">rbind</span>(</span>
<span id="cb6-8"><a href="challenges-of-passiv-investing.html#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">ncol</span>(returns)), <span class="co"># sum up to 1</span></span>
<span id="cb6-9"><a href="challenges-of-passiv-investing.html#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">diag</span>(<span class="dv">1</span>, <span class="at">nrow=</span><span class="fu">ncol</span>(returns), <span class="at">ncol=</span><span class="fu">ncol</span>(returns)) <span class="co"># long only</span></span>
<span id="cb6-10"><a href="challenges-of-passiv-investing.html#cb6-10" aria-hidden="true" tabindex="-1"></a>      )),</span>
<span id="cb6-11"><a href="challenges-of-passiv-investing.html#cb6-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">bvec =</span> <span class="fu">c</span>(</span>
<span id="cb6-12"><a href="challenges-of-passiv-investing.html#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span>, <span class="co"># sum up to 1</span></span>
<span id="cb6-13"><a href="challenges-of-passiv-investing.html#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">ncol</span>(returns)) <span class="co"># long only</span></span>
<span id="cb6-14"><a href="challenges-of-passiv-investing.html#cb6-14" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb6-15"><a href="challenges-of-passiv-investing.html#cb6-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">meq =</span> <span class="dv">1</span></span>
<span id="cb6-16"><a href="challenges-of-passiv-investing.html#cb6-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-17"><a href="challenges-of-passiv-investing.html#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="challenges-of-passiv-investing.html#cb6-18" aria-hidden="true" tabindex="-1"></a>    qp <span class="ot">&lt;-</span> <span class="fu">solve.QP</span>(<span class="at">Dmat =</span> mat<span class="sc">$</span>Dmat, <span class="at">dvec =</span> mat<span class="sc">$</span>dvec, <span class="at">Amat =</span> mat<span class="sc">$</span>Amat, <span class="at">bvec =</span> mat<span class="sc">$</span>bvec, <span class="at">meq =</span> mat<span class="sc">$</span>meq)</span>
<span id="cb6-19"><a href="challenges-of-passiv-investing.html#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="challenges-of-passiv-investing.html#cb6-20" aria-hidden="true" tabindex="-1"></a>    port <span class="ot">&lt;-</span> <span class="fu">xts</span>(returns <span class="sc">%*%</span> qp<span class="sc">$</span>solution, <span class="at">order.by=</span><span class="fu">index</span>(returns))</span>
<span id="cb6-21"><a href="challenges-of-passiv-investing.html#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="challenges-of-passiv-investing.html#cb6-22" aria-hidden="true" tabindex="-1"></a>    mu_and_var <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb6-23"><a href="challenges-of-passiv-investing.html#cb6-23" aria-hidden="true" tabindex="-1"></a>      mu_and_var,</span>
<span id="cb6-24"><a href="challenges-of-passiv-investing.html#cb6-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.frame</span>(<span class="st">&quot;lambda&quot;</span> <span class="ot">=</span> lambda, <span class="st">&quot;mu&quot;</span> <span class="ot">=</span> mu <span class="sc">%*%</span> qp<span class="sc">$</span>solution, <span class="st">&quot;sd&quot;</span> <span class="ot">=</span> <span class="fu">sqrt</span>(<span class="fu">t</span>(qp<span class="sc">$</span>solution) <span class="sc">%*%</span> cov <span class="sc">%*%</span> qp<span class="sc">$</span>solution))</span>
<span id="cb6-25"><a href="challenges-of-passiv-investing.html#cb6-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-26"><a href="challenges-of-passiv-investing.html#cb6-26" aria-hidden="true" tabindex="-1"></a>    portfolios <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb6-27"><a href="challenges-of-passiv-investing.html#cb6-27" aria-hidden="true" tabindex="-1"></a>      portfolios,</span>
<span id="cb6-28"><a href="challenges-of-passiv-investing.html#cb6-28" aria-hidden="true" tabindex="-1"></a>      qp<span class="sc">$</span>solution</span>
<span id="cb6-29"><a href="challenges-of-passiv-investing.html#cb6-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-30"><a href="challenges-of-passiv-investing.html#cb6-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-31"><a href="challenges-of-passiv-investing.html#cb6-31" aria-hidden="true" tabindex="-1"></a>portfolios <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(portfolios)</span>
<span id="cb6-32"><a href="challenges-of-passiv-investing.html#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(portfolios) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(returns)</span></code></pre></div>
<p>Following that, we convert the daily returns and standard deviation to yearly returns and standard deviation before plotting the efficient frontier.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb7-1"><a href="challenges-of-passiv-investing.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annualize</span></span>
<span id="cb7-2"><a href="challenges-of-passiv-investing.html#cb7-2" aria-hidden="true" tabindex="-1"></a>mu_and_var<span class="sc">$</span>mu <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">+</span>mu_and_var<span class="sc">$</span>mu)<span class="sc">^</span><span class="dv">250-1</span></span>
<span id="cb7-3"><a href="challenges-of-passiv-investing.html#cb7-3" aria-hidden="true" tabindex="-1"></a>mu_and_var<span class="sc">$</span>sd <span class="ot">&lt;-</span> mu_and_var<span class="sc">$</span>sd <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="dv">250</span>)</span>
<span id="cb7-4"><a href="challenges-of-passiv-investing.html#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="challenges-of-passiv-investing.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> mu_and_var) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="challenges-of-passiv-investing.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_lines</span>(<span class="at">y =</span> <span class="sc">~</span>mu, <span class="at">x =</span> <span class="sc">~</span>sd, <span class="at">name =</span> <span class="st">&quot;efficient frontier&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="challenges-of-passiv-investing.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">x =</span> <span class="sc">~</span>sd, <span class="at">y=</span><span class="sc">~</span>mu, <span class="at">mode=</span><span class="st">&quot;markers&quot;</span>, <span class="at">name =</span> <span class="st">&quot;lambda steps&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="challenges-of-passiv-investing.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb7-9"><a href="challenges-of-passiv-investing.html#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;3-Asset MVP&quot;</span>,</span>
<span id="cb7-10"><a href="challenges-of-passiv-investing.html#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="fu">min</span>(mu_and_var<span class="sc">$</span>mu)<span class="sc">*</span><span class="fl">0.9</span>, <span class="fu">max</span>(mu_and_var<span class="sc">$</span>mu)<span class="sc">*</span><span class="fl">1.1</span>)),</span>
<span id="cb7-11"><a href="challenges-of-passiv-investing.html#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="fu">min</span>(mu_and_var<span class="sc">$</span>sd)<span class="sc">*</span><span class="fl">0.95</span>, <span class="fu">max</span>(mu_and_var<span class="sc">$</span>sd)<span class="sc">*</span><span class="fl">1.05</span>)),</span>
<span id="cb7-12"><a href="challenges-of-passiv-investing.html#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">margin =</span> <span class="fu">list</span>(</span>
<span id="cb7-13"><a href="challenges-of-passiv-investing.html#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">l =</span> <span class="dv">10</span>,</span>
<span id="cb7-14"><a href="challenges-of-passiv-investing.html#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">r =</span> <span class="dv">10</span>,</span>
<span id="cb7-15"><a href="challenges-of-passiv-investing.html#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">b =</span> <span class="dv">70</span>,</span>
<span id="cb7-16"><a href="challenges-of-passiv-investing.html#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">t =</span> <span class="dv">50</span>,</span>
<span id="cb7-17"><a href="challenges-of-passiv-investing.html#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">pad =</span> <span class="dv">4</span></span>
<span id="cb7-18"><a href="challenges-of-passiv-investing.html#cb7-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-19"><a href="challenges-of-passiv-investing.html#cb7-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb7-20"><a href="challenges-of-passiv-investing.html#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_save</span>()</span></code></pre></div>
<p><img src="Master_Thesis_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb8-1"><a href="challenges-of-passiv-investing.html#cb8-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">type=</span><span class="st">&quot;bar&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">layout</span>(<span class="at">title=</span><span class="st">&quot;Portfolio compositions&quot;</span>, <span class="at">barmode=</span><span class="st">&quot;stack&quot;</span>, <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title=</span><span class="st">&quot;lambda&quot;</span>, <span class="at">autorange =</span> <span class="st">&quot;reversed&quot;</span>), <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title=</span><span class="st">&quot;wgt&quot;</span>))</span>
<span id="cb8-2"><a href="challenges-of-passiv-investing.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(portfolios)){</span>
<span id="cb8-3"><a href="challenges-of-passiv-investing.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="challenges-of-passiv-investing.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">x=</span><span class="fu">seq</span>(<span class="fl">0.01</span>,<span class="dv">1</span>, <span class="fl">0.01</span>), <span class="at">y=</span>portfolios[, i], <span class="at">name =</span> <span class="fu">colnames</span>(portfolios)[i])</span>
<span id="cb8-5"><a href="challenges-of-passiv-investing.html#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-6"><a href="challenges-of-passiv-investing.html#cb8-6" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">html_save</span>()</span></code></pre></div>
<p><img src="Master_Thesis_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
</div>
<div id="index-tracking-portfolio-itp" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Index-tracking portfolio (ITP)</h2>
<p>Indices are asset baskets that are used to track the performance of a specific asset group. The well-known Standard and Poor’s 500 index (short: S&amp;P 500), for example, tracks the top 500 stocks in the United States. All indices are not investible and only serve to visualize the performance of these asset groups without incurring transaction costs. Asset managers use such indices as benchmarks to compare the performance of their funds. Each fund has its own benchmark, which contains roughly the same assets that the manager could purchase. If the fund underperforms its benchmark, it may be an indication that the fund manager made a poor decision. That is why all fund managers strive to outperform their benchmarks through carefully chosen investments. The past has proven that this is rearly achived with activ managemnt after costs <span class="citation">(<a href="#ref-Desm2016" role="doc-biblioref">Desmond Pace and Grima 2016</a>)</span>. This is the reason why passiv managed funds with the goal to track there benchmarks are becoming more frequent. This is why passively managed funds with the purpose of tracking their benchmarks are becoming more common. This can be accomplished through either full or sparse replication. In most circumstances, a full replication that achieves the exact performance we seek is not achievable because not all assets in an index are investable. And, if so, it would be unwise because benchmarks with numerous indexes can contain over ten thousand separate assets, resulting in a massive amount of transaction costs. A sparse replication of the performance is the most prevalent approach. To do so, the portfolio manager must define his benchmark, which should overlap with his fund’s investing universe. Following that, he will reduce this universe using investor principles such as liquidity and availability. Now he can begin to optimize a portfolio, taking into account the investor constraints, in order to match the benchmark performance. Typically, this is accomplished by lowering the variance between the ITP’s daily returns and the benchmark:</p>
<p><span class="math display">\[
 minimize \ \ Var(r_{p}-r_{bm})
\]</span></p>
<p>To obtain the portfolio weights <span class="math inline">\(w\)</span>, we must first substitute <span class="math inline">\(r_{p}\)</span> as shown below:</p>
<p><span class="math display">\[
  r_{p} = R * w
\]</span></p>
<p>The Variance is then solved up until a quadratic problem dependent on the portfolio weights <span class="math inline">\(w\)</span> is represented:</p>
<p><span class="math display">\[
 Var(r_{p}-r_{bm}) = Var(R * w - r_{bm}) = Var(R * w) + Var(r_{bm}) - 2 \cdot Cov(R*w,r_{bm}) 
\]</span>
We must now solve each of the three terms, beginning with the easiest.</p>
<p><span class="math display">\[
Var(r_{bm}) = \sigma_{bm}^2 = constant
\]</span></p>
<p>The variance of the portfolio can be solved by looking at the Portfolio math Using Matrix Algebra section in <span class="citation">(<a href="#ref-Eric2021" role="doc-biblioref">Zivot 2021</a>)</span>:</p>
<p><span class="math display">\[
Var(R * w) = w^T * Cov(R) * w
\]</span></p>
<p>And the last term can be solved in general as (<a href="https://bookdown.org/compfinezbook/introcompfinr/Multivariate-Probability-Distributions-Using-Matrix-Algebra.html" class="uri">https://bookdown.org/compfinezbook/introcompfinr/Multivariate-Probability-Distributions-Using-Matrix-Algebra.html</a> 3.6.5):</p>
<p><span class="math display">\[
  Cov(A*a, b) = Cov(b, A*a) = E[(b-\mu_{b})(A*a-\mu_{A}*a)] = E[(b-\mu_{b})(A-\mu_{A})*a] = E[(b-\mu_{b})(A-\mu_{A})]*a = Cov(A,b) * a
\]</span></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="challenges-of-passiv-investing.html#cb9-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">10</span>), <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb9-2"><a href="challenges-of-passiv-investing.html#cb9-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.8</span>)</span>
<span id="cb9-3"><a href="challenges-of-passiv-investing.html#cb9-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">7</span>)</span>
<span id="cb9-4"><a href="challenges-of-passiv-investing.html#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="challenges-of-passiv-investing.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(A <span class="sc">%*%</span> a, b)</span></code></pre></div>
<pre><code>##      [,1]
## [1,] 2.15</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="challenges-of-passiv-investing.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(a) <span class="sc">%*%</span> <span class="fu">cov</span>(A, b)</span></code></pre></div>
<pre><code>##      [,1]
## [1,] 2.15</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="challenges-of-passiv-investing.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">cov</span>(A, b)) <span class="sc">%*%</span> a <span class="co"># das hier wird gebraucht</span></span></code></pre></div>
<pre><code>##      [,1]
## [1,] 2.15</code></pre>
<p>This results in the final formula of the ITP:</p>
<p><span class="math display" id="eq:ITP">\[\begin{equation}
  \begin{split}
   Var(r_{p}-r_{bm}) &amp; = Var(R \times w - r_{bm}) \\
   &amp; = Var(R \times w) - 2 \cdot Cov(R \times w,r_{bm}) + Var(r_{bm})  \\
   &amp; = w^T \times Cov(R) \times w - 2 \cdot Cov(r_{bm}, R)^T \times w + \sigma_{bm}^2
   \end{split}
   \tag{6.2}
\end{equation}\]</span></p>
<p>The minimization problem of the ITP in the general stricture which all optimizers need is:</p>
<p><span class="math display">\[
  min(\frac{1}{2} \cdot b^T \times D \times b -d^T \times b)
\]</span></p>
<p>Because it is a minimization we can ignore constant terms and stretching coefficients and still find the same minimum. This results in the general substitution of the ITP as follows:</p>
<p><span class="math display">\[
  D = Cov(R)
\]</span></p>
<p>and</p>
<p><span class="math display">\[
d = Cov(r_{bm}, R)
\]</span></p>
<p>Now we need to add some basic constraints like in the MVP, to sum up the weights to 1 and being long only.</p>
<div id="example-itp" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Example ITP</h3>
<p>We will show the results of tracking the S&amp;P 500 with a tracking portfolio that can only invest in IBM, Apple and Google without going into details:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb15-1"><a href="challenges-of-passiv-investing.html#cb15-1" aria-hidden="true" tabindex="-1"></a>pool_returns <span class="ot">&lt;-</span> <span class="fu">buffer</span>(</span>
<span id="cb15-2"><a href="challenges-of-passiv-investing.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_yf</span>(<span class="at">tickers =</span> <span class="fu">c</span>(<span class="st">&quot;IBM&quot;</span>, <span class="st">&quot;GOOG&quot;</span>, <span class="st">&quot;AAPL&quot;</span>), <span class="at">from =</span> <span class="st">&quot;2020-01-01&quot;</span>, <span class="at">to =</span> <span class="st">&quot;2020-12-31&quot;</span>)<span class="sc">$</span>returns, </span>
<span id="cb15-3"><a href="challenges-of-passiv-investing.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;3_assets&quot;</span></span>
<span id="cb15-4"><a href="challenges-of-passiv-investing.html#cb15-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-5"><a href="challenges-of-passiv-investing.html#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="challenges-of-passiv-investing.html#cb15-6" aria-hidden="true" tabindex="-1"></a>bm_returns <span class="ot">&lt;-</span> <span class="fu">buffer</span>(</span>
<span id="cb15-7"><a href="challenges-of-passiv-investing.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_yf</span>(<span class="at">tickers =</span> <span class="st">&quot;%5EGSPC&quot;</span>, <span class="at">from =</span> <span class="st">&quot;2020-01-01&quot;</span>, <span class="at">to =</span> <span class="st">&quot;2020-12-31&quot;</span>)<span class="sc">$</span>returns, </span>
<span id="cb15-8"><a href="challenges-of-passiv-investing.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;sp500&quot;</span></span>
<span id="cb15-9"><a href="challenges-of-passiv-investing.html#cb15-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(., <span class="st">&quot;S&amp;P 500&quot;</span>)</span>
<span id="cb15-10"><a href="challenges-of-passiv-investing.html#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="challenges-of-passiv-investing.html#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="challenges-of-passiv-investing.html#cb15-12" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb15-13"><a href="challenges-of-passiv-investing.html#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Dmat =</span> <span class="fu">cov</span>(pool_returns),</span>
<span id="cb15-14"><a href="challenges-of-passiv-investing.html#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">dvec =</span> <span class="fu">cov</span>(pool_returns, bm_returns),</span>
<span id="cb15-15"><a href="challenges-of-passiv-investing.html#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Amat =</span> <span class="fu">t</span>(<span class="fu">rbind</span>(</span>
<span id="cb15-16"><a href="challenges-of-passiv-investing.html#cb15-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">ncol</span>(pool_returns)), <span class="co"># sum up to 1</span></span>
<span id="cb15-17"><a href="challenges-of-passiv-investing.html#cb15-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">diag</span>(<span class="dv">1</span>, <span class="at">nrow=</span><span class="fu">ncol</span>(pool_returns), <span class="at">ncol=</span><span class="fu">ncol</span>(pool_returns)) <span class="co"># long only</span></span>
<span id="cb15-18"><a href="challenges-of-passiv-investing.html#cb15-18" aria-hidden="true" tabindex="-1"></a>    )),</span>
<span id="cb15-19"><a href="challenges-of-passiv-investing.html#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">bvec =</span> <span class="fu">c</span>(</span>
<span id="cb15-20"><a href="challenges-of-passiv-investing.html#cb15-20" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span>, <span class="co"># sum up to 1</span></span>
<span id="cb15-21"><a href="challenges-of-passiv-investing.html#cb15-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">ncol</span>(pool_returns)) <span class="co"># long only</span></span>
<span id="cb15-22"><a href="challenges-of-passiv-investing.html#cb15-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb15-23"><a href="challenges-of-passiv-investing.html#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">meq =</span> <span class="dv">1</span></span>
<span id="cb15-24"><a href="challenges-of-passiv-investing.html#cb15-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-25"><a href="challenges-of-passiv-investing.html#cb15-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="challenges-of-passiv-investing.html#cb15-26" aria-hidden="true" tabindex="-1"></a>qp <span class="ot">&lt;-</span> <span class="fu">solve.QP</span>(<span class="at">Dmat =</span> mat<span class="sc">$</span>Dmat, <span class="at">dvec =</span> mat<span class="sc">$</span>dvec, <span class="at">Amat =</span> mat<span class="sc">$</span>Amat, <span class="at">bvec =</span> mat<span class="sc">$</span>bvec, <span class="at">meq =</span> mat<span class="sc">$</span>meq)</span>
<span id="cb15-27"><a href="challenges-of-passiv-investing.html#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="challenges-of-passiv-investing.html#cb15-28" aria-hidden="true" tabindex="-1"></a>port_returns <span class="ot">&lt;-</span> <span class="fu">xts</span>(pool_returns <span class="sc">%*%</span> qp<span class="sc">$</span>solution, <span class="at">order.by=</span><span class="fu">index</span>(pool_returns)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-29"><a href="challenges-of-passiv-investing.html#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(., <span class="st">&quot;tracking portfolio&quot;</span>)</span>
<span id="cb15-30"><a href="challenges-of-passiv-investing.html#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="challenges-of-passiv-investing.html#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="challenges-of-passiv-investing.html#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="fu">setNames</span>(qp<span class="sc">$</span>solution, <span class="fu">colnames</span>(pool_returns))</span></code></pre></div>
<pre><code>##      AAPL       IBM      GOOG 
## 0.2677928 0.4041880 0.3280192</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code_fold_it_collapsed"><code class="sourceCode r"><span id="cb17-1"><a href="challenges-of-passiv-investing.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotly_line_chart_xts</span>(<span class="fu">ret_to_cumret</span>(<span class="fu">cbind.xts</span>(port_returns, bm_returns))) <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="challenges-of-passiv-investing.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_save</span>()</span></code></pre></div>
<p><img src="Master_Thesis_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Desm2016" class="csl-entry">
Desmond Pace, Jana Hili, and Simon Grima. 2016. <span>“Active Versus Passive Investing: An Empirical Study on the US and European Mutual Funds and ETFs.”</span>
</div>
<div id="ref-Mari2005" class="csl-entry">
Maringer, Dientmar. 2005. <em>Portfolio Management with Heuristic Optimization</em>.
</div>
<div id="ref-Eric2021" class="csl-entry">
Zivot, Eric. 2021. <em>Introduction to Computational Finance and Financial Econometrics with r</em>.
</div>
</div>
<script src="script.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="activ-vs-passiv-investing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analytical_solver.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/AxelCode-R/Master-Thesis/edit/master/5_Challenges_of_Passiv_Investing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Master_Thesis.pdf"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
