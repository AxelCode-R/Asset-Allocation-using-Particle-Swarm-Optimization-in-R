# Mathematical Fundations
This chapter provides an overview of the mathematical calculations and conventions used in this Thesis. It's important to note that the majority of mathematical formulas are written in matrix notation. In the majority of cases, this will result in a direct translation into R-code. We also provide all necessary assumptions for the modeled return structure. It is crucial to note that reality is too complicated and can only be partially modeled. We employ simplistic, basic models that don't hold up in real-world situations, but these models or variations on them are frequently used in finance and have proven to be helpful. Additionally, because factor models commonly reduce the dimension of the modeled dependencies, these fundamental models result in more complex problems for the PSO to solve.

## Basic Operators
A compendium that compares commonly used mathematical symbols to R-code and its meanings can be found in the table below:

```{r, echo=F}
reactable(
  data.frame(
    "Latex" = c("&#215;", 'A<sup>T</sup>', "&middot;"),
    "R"= c("%*%", "t(A)", "*"),
    "Meaning" = c("Matrix or vector multiplication", "transpose of Matrix or vector A", "Scalar or elementwise vector multiplication")
  ), 
  columns <- list(
    Latex = colDef(name = "Latex/Displayed", html = T),
    R = colDef(name="R-Code")
  ),
  style = list(fontFamily="arial", fontSize=13)
) %>% 
  html_save()
```

## Return calculation
Any portfolio optimization strategy based on historical data must start with returns. These returns are calculated using [adjusted closing prices](https://www.investopedia.com/terms/a/adjusted closing price.asp), which show the percentage change over time. Adjusted closing prices are reflecting dividends and are cleaned of by stock splits and rights offerings. These Returns are essential for comparing assets and for analyzing dependencies.

### daily returns
The default timeframe for all raw data in this thesis is one workday, and we only use simple returns. The simple returns can be calculated as follows if we know the adjusted closing price $P$ of one asset on workdays $t_i$ and $t_{i+1}$:
$$
  R_{i+1} = \frac{P_{t_{i+1}}}{P_{t_i}}-1
$$

### annualized returns

## Markowitz Modern Portfolio Theory (MPT)
In 1952, Harry Markowitz published his first ground-breaking work, which had a significant influence on modern finance. primarily by outlining the effects of diversification and efficient portfolio. The definition of an efficient portfolio is one that has either the maximum expected return for a given risk target or the minimum risk for the given expected return. "A portfolio has the same return but less variance than the sum of its parts" is a simple definition of diversification. This is true if the assets are not perfectly correlated because bad and good movers can make up for each other, reducing the likelihood of extreme events. You can find more specific information at [@Mari2005].

### Assumptions of Markowitz Portfolio Theory
The following are the Markowitz assumptions that can be combined, according to [@Mari2005]:
\begin{enumerate}
    \item Perfect market without taxes or transaction costs.
    \item Short sales are disallowed.
    \item Assets are infinitely divisible.
    \item Expected Returns, Variances and Covariances contain all information.
    \item Investors are risk-adverse, they will only accept greater risk if they
are compensated with a higher expected return.
\end{enumerate}
It is not necessary to assume that the returns are normally distributed, but we will use it here, to simplify the problem. More information about the conditions for using other distributions can be found in [@Mari2005]. It is clear that these assumption do not hold in practice.

The assumption that the returns are normally distributed is not required, but we'll assume it in this case to make the problem simpler. [@Mari2005] has further details regarding the requirements for utilizing other distributions. It is obvious that these assumptions are unrealistic in practice.

## Portfolio Math
Proofs for the fundamental calculations required for portfolio optimization as shown in [@Eric2021] will be provided in this section. I'm hoping that everyone who reads this will be able to comprehend the formulas in their entirety. Since this is the most widely used data format in practice, we prefer to represent the returns differently than most sources. The portfolio weights for $N$ assets are denoted by $w$ and the random return vector $R$, respectively:
$$
  R = 
  \begin{bmatrix}
    R_{1} & R_{2} & \cdots & R_{N}  
 \end{bmatrix}
 , \ \ 
 w = 
  \begin{bmatrix}
    w_{1} \\ 
    w_{2} \\
    \cdots \\
    w_{N}  
 \end{bmatrix}
$$
In this thesis, we also simplify each return to be normally distributed with $R_i = \mathcal{N}(\mu_i, \sigma_i^2)$. As a result, linear combinations of normally distributed random variables are jointly normal distributed and have a mean, variance, and covariance that can be used to fully describe them.

### expected returns
The following formula can be used to get the expected returns of a vector with normally distributed random variables $R \in \mathbb{R}^{N}$:
$$
  E[R] =
  \begin{bmatrix}
    E[R_{1}] & E[R_{2}] & \cdots & E[R_{N}]  
 \end{bmatrix}
 =
 \begin{bmatrix}
    E[\mu_{1}] & E[\mu_{2}] & \cdots & E[\mu_{N}]  
 \end{bmatrix}
 =
 \mu
$$
### expected portfolio return
The following equation can be used to get the linear combination of expected returns $mu$ and a weighting vector $w$ (for example, portfolio weights):
$$
 \mu \times w =
  \begin{bmatrix}
    E[\mu_{1}] & E[\mu_{2}] & \cdots & E[\mu_{N}]
 \end{bmatrix}
  \times 
  \begin{bmatrix}
    w_{1} \\ 
    w_{2} \\
    \cdots \\
    w_{N}  
 \end{bmatrix}
 =
 E[\mu_{1}] \cdot w_1 + E[\mu_{2}] \cdot w_2 + \cdots + E[\mu_{N}] \cdot w_{N} 
 =
 \mu_P
$$

### portfolio returns
Let $R \in \mathbb{R}^{T \times N}$ denote a realized return Matrix of $N$ assets and $T$ days in the past. The portfolio return on each day can be calculated with the formula of the expected portfolio return. This is possible on all days $T$ by:
$$
  R \times w = 
  \begin{bmatrix}
    R_{1, 1} & R_{1, 2} & \cdots & R_{1, N} \\
    R_{2, 1} & R_{2, 2} & \cdots & R_{2, N} \\
    \cdots \\
    R_{T, 1} & R_{T, 2} & \cdots & R_{T, N} \\
 \end{bmatrix}
  \times 
  \begin{bmatrix}
    w_{1} \\ 
    w_{2} \\
    \cdots \\
    w_{N}  
 \end{bmatrix}
 =
   \begin{bmatrix}
    R_{1}^P \\ 
    R_{2}^P \\
    \cdots \\
    R_{N}^P  
 \end{bmatrix}
 =
 R_P
$$






